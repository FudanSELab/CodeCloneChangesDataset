[{"authorTime":"2018-10-05 20:25:43","codes":[{"authorDate":"2018-10-05 20:25:43","commitOrder":1,"curCode":"    public void testClientAddress() throws Exception {\n        QuorumPeer quorumPeer = new QuorumPeer();\n        LocalPeerBean remotePeerBean = new LocalPeerBean(quorumPeer);\n\n        \r\n\n        String result = remotePeerBean.getClientAddress();\n        assertNotNull(result);\n        assertEquals(0, result.length());\n\n        \r\n\n        ServerCnxnFactory cnxnFactory = ServerCnxnFactory.createFactory();\n        int clientPort = PortAssignment.unique();\n        InetSocketAddress address = new InetSocketAddress(clientPort);\n        cnxnFactory.configure(address, 5, false);\n        quorumPeer.setCnxnFactory(cnxnFactory);\n\n        result = remotePeerBean.getClientAddress();\n        String ipv4 = \"0.0.0.0:\" + clientPort;\n        String ipv6 = \"[0:0:0:0:0:0:0:0]:\" + clientPort;\n        assertTrue(result.equals(ipv4) || result.equals(ipv6));\n        \r\n        cnxnFactory.shutdown();\n\n        \r\n\n        clientPort = PortAssignment.unique();\n        InetAddress clientIP = InetAddress.getLoopbackAddress();\n        address = new InetSocketAddress(clientIP, clientPort);\n        cnxnFactory = ServerCnxnFactory.createFactory();\n        cnxnFactory.configure(address, 5, false);\n        quorumPeer.setCnxnFactory(cnxnFactory);\n\n        result = remotePeerBean.getClientAddress();\n        String expectedResult = clientIP.getHostAddress() + \":\" + clientPort;\n        assertEquals(expectedResult, result);\n        \r\n        cnxnFactory.shutdown();\n    }\n","date":"2018-10-05 20:25:43","endLine":83,"groupId":"667","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testClientAddress","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/9b/4a9c15e8caba09188002e8dd12c6b0b7da9581.src","preCode":"    public void testClientAddress() throws Exception {\n        QuorumPeer quorumPeer = new QuorumPeer();\n        LocalPeerBean remotePeerBean = new LocalPeerBean(quorumPeer);\n\n        \r\n\n        String result = remotePeerBean.getClientAddress();\n        assertNotNull(result);\n        assertEquals(0, result.length());\n\n        \r\n\n        ServerCnxnFactory cnxnFactory = ServerCnxnFactory.createFactory();\n        int clientPort = PortAssignment.unique();\n        InetSocketAddress address = new InetSocketAddress(clientPort);\n        cnxnFactory.configure(address, 5, false);\n        quorumPeer.setCnxnFactory(cnxnFactory);\n\n        result = remotePeerBean.getClientAddress();\n        String ipv4 = \"0.0.0.0:\" + clientPort;\n        String ipv6 = \"[0:0:0:0:0:0:0:0]:\" + clientPort;\n        assertTrue(result.equals(ipv4) || result.equals(ipv6));\n        \r\n        cnxnFactory.shutdown();\n\n        \r\n\n        clientPort = PortAssignment.unique();\n        InetAddress clientIP = InetAddress.getLoopbackAddress();\n        address = new InetSocketAddress(clientIP, clientPort);\n        cnxnFactory = ServerCnxnFactory.createFactory();\n        cnxnFactory.configure(address, 5, false);\n        quorumPeer.setCnxnFactory(cnxnFactory);\n\n        result = remotePeerBean.getClientAddress();\n        String expectedResult = clientIP.getHostAddress() + \":\" + clientPort;\n        assertEquals(expectedResult, result);\n        \r\n        cnxnFactory.shutdown();\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/quorum/LocalPeerBeanTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":41,"status":"B"},{"authorDate":"2018-10-05 20:25:43","commitOrder":1,"curCode":"    public void testGetSecureClientPort() throws IOException {\n        ZooKeeperServer zks = new ZooKeeperServer();\n        \r\n\r\n\n        ZooKeeperServerBean serverBean = new ZooKeeperServerBean(zks);\n        String result = serverBean.getSecureClientPort();\n        assertEquals(\"\", result);\n\n        \r\n\r\n\n\n        ServerCnxnFactory cnxnFactory = ServerCnxnFactory.createFactory();\n        int secureClientPort = 8443;\n        InetSocketAddress address = new InetSocketAddress(secureClientPort);\n        cnxnFactory.configure(address, 5, true);\n        zks.setSecureServerCnxnFactory(cnxnFactory);\n\n        result = serverBean.getSecureClientPort();\n        assertEquals(Integer.toString(secureClientPort), result);\n\n        \r\n        cnxnFactory.shutdown();\n\n    }\n","date":"2018-10-05 20:25:43","endLine":111,"groupId":"3023","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testGetSecureClientPort","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/9b/c2b0e63a1ee642f2d1c9d3e37799a8afe65fad.src","preCode":"    public void testGetSecureClientPort() throws IOException {\n        ZooKeeperServer zks = new ZooKeeperServer();\n        \r\n\r\n\n        ZooKeeperServerBean serverBean = new ZooKeeperServerBean(zks);\n        String result = serverBean.getSecureClientPort();\n        assertEquals(\"\", result);\n\n        \r\n\r\n\n\n        ServerCnxnFactory cnxnFactory = ServerCnxnFactory.createFactory();\n        int secureClientPort = 8443;\n        InetSocketAddress address = new InetSocketAddress(secureClientPort);\n        cnxnFactory.configure(address, 5, true);\n        zks.setSecureServerCnxnFactory(cnxnFactory);\n\n        result = serverBean.getSecureClientPort();\n        assertEquals(Integer.toString(secureClientPort), result);\n\n        \r\n        cnxnFactory.shutdown();\n\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/ZooKeeperServerBeanTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":84,"status":"B"}],"commitId":"faa7cec71fddfb959a7d67923acffdb67d93c953","commitMessage":"@@@ZOOKEEPER-3032: MAVEN MIGRATION - move java server.  client\n\nAuthor: Norbert Kalmar <nkalmar@yahoo.com>\n\nReviewers: hanm@apache.org.  andor@apache.org\n\nCloses #633 from nkalmar/ZOOKEEPER-3032 and squashes the following commits:\n\n3f9a0eca [Norbert Kalmar] ZOOKEEPER-3032 fix flaky QuorumPeerMainTest.testLeaderElectionWithDisloyalVoter_stillHasMajority\n27295ed6 [Norbert Kalmar] ZOOKEEPER-3032 - MAVEN MIGRATION - move java server.  client\n","date":"2018-10-05 20:25:43","modifiedFileCount":"0","status":"B","submitter":"Norbert Kalmar"},{"authorTime":"2019-02-13 20:12:00","codes":[{"authorDate":"2019-02-13 20:12:00","commitOrder":2,"curCode":"    public void testClientAddress() throws Exception {\n        QuorumPeer quorumPeer = new QuorumPeer();\n        LocalPeerBean remotePeerBean = new LocalPeerBean(quorumPeer);\n\n        \r\n\n        String result = remotePeerBean.getClientAddress();\n        assertNotNull(result);\n        assertEquals(0, result.length());\n\n        \r\n\n        ServerCnxnFactory cnxnFactory = ServerCnxnFactory.createFactory();\n        int clientPort = PortAssignment.unique();\n        InetSocketAddress address = new InetSocketAddress(clientPort);\n        cnxnFactory.configure(address, 5, -1, false);\n        quorumPeer.setCnxnFactory(cnxnFactory);\n\n        result = remotePeerBean.getClientAddress();\n        String ipv4 = \"0.0.0.0:\" + clientPort;\n        String ipv6 = \"[0:0:0:0:0:0:0:0]:\" + clientPort;\n        assertTrue(result.equals(ipv4) || result.equals(ipv6));\n        \r\n        cnxnFactory.shutdown();\n\n        \r\n\n        clientPort = PortAssignment.unique();\n        InetAddress clientIP = InetAddress.getLoopbackAddress();\n        address = new InetSocketAddress(clientIP, clientPort);\n        cnxnFactory = ServerCnxnFactory.createFactory();\n        cnxnFactory.configure(address, 5, -1, false);\n        quorumPeer.setCnxnFactory(cnxnFactory);\n\n        result = remotePeerBean.getClientAddress();\n        String expectedResult = clientIP.getHostAddress() + \":\" + clientPort;\n        assertEquals(expectedResult, result);\n        \r\n        cnxnFactory.shutdown();\n    }\n","date":"2019-02-13 20:12:00","endLine":83,"groupId":"10319","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testClientAddress","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/80/5b3cb0bdba3ac448570ddf9ea97d48928289aa.src","preCode":"    public void testClientAddress() throws Exception {\n        QuorumPeer quorumPeer = new QuorumPeer();\n        LocalPeerBean remotePeerBean = new LocalPeerBean(quorumPeer);\n\n        \r\n\n        String result = remotePeerBean.getClientAddress();\n        assertNotNull(result);\n        assertEquals(0, result.length());\n\n        \r\n\n        ServerCnxnFactory cnxnFactory = ServerCnxnFactory.createFactory();\n        int clientPort = PortAssignment.unique();\n        InetSocketAddress address = new InetSocketAddress(clientPort);\n        cnxnFactory.configure(address, 5, false);\n        quorumPeer.setCnxnFactory(cnxnFactory);\n\n        result = remotePeerBean.getClientAddress();\n        String ipv4 = \"0.0.0.0:\" + clientPort;\n        String ipv6 = \"[0:0:0:0:0:0:0:0]:\" + clientPort;\n        assertTrue(result.equals(ipv4) || result.equals(ipv6));\n        \r\n        cnxnFactory.shutdown();\n\n        \r\n\n        clientPort = PortAssignment.unique();\n        InetAddress clientIP = InetAddress.getLoopbackAddress();\n        address = new InetSocketAddress(clientIP, clientPort);\n        cnxnFactory = ServerCnxnFactory.createFactory();\n        cnxnFactory.configure(address, 5, false);\n        quorumPeer.setCnxnFactory(cnxnFactory);\n\n        result = remotePeerBean.getClientAddress();\n        String expectedResult = clientIP.getHostAddress() + \":\" + clientPort;\n        assertEquals(expectedResult, result);\n        \r\n        cnxnFactory.shutdown();\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/quorum/LocalPeerBeanTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":41,"status":"M"},{"authorDate":"2019-02-13 20:12:00","commitOrder":2,"curCode":"    public void testGetSecureClientPort() throws IOException {\n        ZooKeeperServer zks = new ZooKeeperServer();\n        \r\n\r\n\n        ZooKeeperServerBean serverBean = new ZooKeeperServerBean(zks);\n        String result = serverBean.getSecureClientPort();\n        assertEquals(\"\", result);\n\n        \r\n\r\n\n\n        ServerCnxnFactory cnxnFactory = ServerCnxnFactory.createFactory();\n        int secureClientPort = 8443;\n        InetSocketAddress address = new InetSocketAddress(secureClientPort);\n        cnxnFactory.configure(address, 5, -1, true);\n        zks.setSecureServerCnxnFactory(cnxnFactory);\n\n        result = serverBean.getSecureClientPort();\n        assertEquals(Integer.toString(secureClientPort), result);\n\n        \r\n        cnxnFactory.shutdown();\n\n    }\n","date":"2019-02-13 20:12:00","endLine":111,"groupId":"10319","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testGetSecureClientPort","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-zookeeper-10-0.7/blobInfo/CC_OUT/blobs/d2/68410d856d924f15bb1298e94cd71a0a338456.src","preCode":"    public void testGetSecureClientPort() throws IOException {\n        ZooKeeperServer zks = new ZooKeeperServer();\n        \r\n\r\n\n        ZooKeeperServerBean serverBean = new ZooKeeperServerBean(zks);\n        String result = serverBean.getSecureClientPort();\n        assertEquals(\"\", result);\n\n        \r\n\r\n\n\n        ServerCnxnFactory cnxnFactory = ServerCnxnFactory.createFactory();\n        int secureClientPort = 8443;\n        InetSocketAddress address = new InetSocketAddress(secureClientPort);\n        cnxnFactory.configure(address, 5, true);\n        zks.setSecureServerCnxnFactory(cnxnFactory);\n\n        result = serverBean.getSecureClientPort();\n        assertEquals(Integer.toString(secureClientPort), result);\n\n        \r\n        cnxnFactory.shutdown();\n\n    }\n","realPath":"zookeeper-server/src/test/java/org/apache/zookeeper/server/ZooKeeperServerBeanTest.java","repoName":"zookeeper","snippetEndLine":0,"snippetStartLine":0,"startLine":84,"status":"M"}],"commitId":"8f3fbf25c63af54e00bad927a606f79ef0bf7fbf","commitMessage":"@@@ZOOKEEPER-974: Allow a configurable ZooKeeper server socket listen ba?\n\n?cklog\n\nIntroduces configuration property \"clientPortBacklog\". Amendment of\noriginal patch from \"Hoonmin Kim\".\n\nAuthor: Josh Elser <elserj@apache.org>\n\nReviewers: andor@apache.org\n\nCloses #784 from joshelser/974-master and squashes the following commits:\n\nfe5f66a5a [Josh Elser] Add some documentation for the new property\nbe61d1c5f [Josh Elser] Feedback from Andor\n3ed36f824 [Josh Elser] Update 'conf' 4lw for clientPortListenBacklog\nfd249939c [Josh Elser] ZOOKEEPER-974: Allow a configurable ZooKeeper server socket listen backlog\n","date":"2019-02-13 20:12:00","modifiedFileCount":"23","status":"M","submitter":"Josh Elser"}]
