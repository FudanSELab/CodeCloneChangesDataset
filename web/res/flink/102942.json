[{"authorTime":"2021-03-05 21:05:36","codes":[{"authorDate":"2021-03-05 21:05:36","commitOrder":1,"curCode":"    public void testMultiChannelWithBarriers() throws Exception {\n        ValidatingCheckpointHandler handler = new ValidatingCheckpointHandler(1);\n        inputGate = createInputGate(3, handler);\n\n        \r\n        BufferOrEvent[] sequence1 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBarrier(1, 1),\n                        createBarrier(1, 2),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBuffer(0), \r\n                        createBarrier(1, 0));\n\n        \r\n        assertOutput(sequence1);\n        assertEquals(1L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData(sequence1[7]);\n\n        \r\n        BufferOrEvent[] sequence2 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(0),\n                        createBuffer(1),\n                        createBuffer(1),\n                        createBuffer(2),\n                        createBarrier(2, 0),\n                        createBarrier(2, 1),\n                        createBarrier(2, 2));\n\n        assertOutput(sequence2);\n        assertEquals(2L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        BufferOrEvent[] sequence3 =\n                addSequence(\n                        inputGate,\n                        createBuffer(2),\n                        createBuffer(2),\n                        createBarrier(3, 2),\n                        createBuffer(2),\n                        createBuffer(2),\n                        createBarrier(3, 0),\n                        createBarrier(3, 1));\n\n        assertOutput(sequence3);\n        assertEquals(3L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        addSequence(inputGate, createBarrier(4, 1), createBarrier(4, 2), createBarrier(4, 0));\n\n        assertOutput();\n        assertEquals(4L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        BufferOrEvent[] sequence5 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBarrier(5, 1),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBarrier(5, 2),\n                        createBuffer(1),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBarrier(5, 0));\n\n        assertOutput(sequence5);\n        assertEquals(5L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData(sequence5[4], sequence5[5], sequence5[6], sequence5[10]);\n\n        \r\n        BufferOrEvent[] sequence6 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createEndOfPartition(0),\n                        createEndOfPartition(1),\n                        createEndOfPartition(2));\n\n        assertOutput(sequence6);\n        assertInflightData();\n    }\n","date":"2021-03-31 14:27:07","endLine":289,"groupId":"22996","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testMultiChannelWithBarriers","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/59/e6237617a6bb2a59138dcbe4edc9d73e999f8a.src","preCode":"    public void testMultiChannelWithBarriers() throws Exception {\n        ValidatingCheckpointHandler handler = new ValidatingCheckpointHandler(1);\n        inputGate = createInputGate(3, handler);\n\n        \r\n        BufferOrEvent[] sequence1 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBarrier(1, 1),\n                        createBarrier(1, 2),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBuffer(0), \r\n                        createBarrier(1, 0));\n\n        \r\n        assertOutput(sequence1);\n        assertEquals(1L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData(sequence1[7]);\n\n        \r\n        BufferOrEvent[] sequence2 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(0),\n                        createBuffer(1),\n                        createBuffer(1),\n                        createBuffer(2),\n                        createBarrier(2, 0),\n                        createBarrier(2, 1),\n                        createBarrier(2, 2));\n\n        assertOutput(sequence2);\n        assertEquals(2L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        BufferOrEvent[] sequence3 =\n                addSequence(\n                        inputGate,\n                        createBuffer(2),\n                        createBuffer(2),\n                        createBarrier(3, 2),\n                        createBuffer(2),\n                        createBuffer(2),\n                        createBarrier(3, 0),\n                        createBarrier(3, 1));\n\n        assertOutput(sequence3);\n        assertEquals(3L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        addSequence(inputGate, createBarrier(4, 1), createBarrier(4, 2), createBarrier(4, 0));\n\n        assertOutput();\n        assertEquals(4L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        BufferOrEvent[] sequence5 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBarrier(5, 1),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBarrier(5, 2),\n                        createBuffer(1),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBarrier(5, 0));\n\n        assertOutput(sequence5);\n        assertEquals(5L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData(sequence5[4], sequence5[5], sequence5[6], sequence5[10]);\n\n        \r\n        BufferOrEvent[] sequence6 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createEndOfPartition(0),\n                        createEndOfPartition(1),\n                        createEndOfPartition(2));\n\n        assertOutput(sequence6);\n        assertInflightData();\n    }\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/io/checkpointing/UnalignedCheckpointsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":192,"status":"B"},{"authorDate":"2021-03-05 21:05:36","commitOrder":1,"curCode":"    public void testEarlyCleanup() throws Exception {\n        ValidatingCheckpointHandler handler = new ValidatingCheckpointHandler(1);\n        inputGate = createInputGate(3, handler);\n\n        \r\n        final BufferOrEvent[] sequence1 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(1),\n                        createBuffer(2),\n                        createBarrier(1, 1),\n                        createBarrier(1, 2),\n                        createBarrier(1, 0));\n        assertOutput(sequence1);\n        assertEquals(1L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        final BufferOrEvent[] sequence2 =\n                addSequence(\n                        inputGate,\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBuffer(0),\n                        createBarrier(2, 1),\n                        createBuffer(1),\n                        createBuffer(1),\n                        createEndOfPartition(1),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBarrier(2, 2),\n                        createBuffer(2),\n                        createEndOfPartition(2),\n                        createBuffer(0),\n                        createEndOfPartition(0));\n        assertOutput(sequence2);\n        assertEquals(2L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n    }\n","date":"2021-03-31 14:27:07","endLine":452,"groupId":"39637","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testEarlyCleanup","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/59/e6237617a6bb2a59138dcbe4edc9d73e999f8a.src","preCode":"    public void testEarlyCleanup() throws Exception {\n        ValidatingCheckpointHandler handler = new ValidatingCheckpointHandler(1);\n        inputGate = createInputGate(3, handler);\n\n        \r\n        final BufferOrEvent[] sequence1 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(1),\n                        createBuffer(2),\n                        createBarrier(1, 1),\n                        createBarrier(1, 2),\n                        createBarrier(1, 0));\n        assertOutput(sequence1);\n        assertEquals(1L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        final BufferOrEvent[] sequence2 =\n                addSequence(\n                        inputGate,\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBuffer(0),\n                        createBarrier(2, 1),\n                        createBuffer(1),\n                        createBuffer(1),\n                        createEndOfPartition(1),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBarrier(2, 2),\n                        createBuffer(2),\n                        createEndOfPartition(2),\n                        createBuffer(0),\n                        createEndOfPartition(0));\n        assertOutput(sequence2);\n        assertEquals(2L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n    }\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/io/checkpointing/UnalignedCheckpointsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":413,"status":"B"}],"commitId":"77bf1055a00a64b02e440355c993ffc9e221525c","commitMessage":"@@@[FLINK-19682][checkpoint] Actively timeout checkpoint barriers on inputs\n\nThis closes #15313\n","date":"2021-03-31 14:27:07","modifiedFileCount":"18","status":"B","submitter":"Dawid Wysakowicz"},{"authorTime":"2021-07-15 19:40:11","codes":[{"authorDate":"2021-03-05 21:05:36","commitOrder":2,"curCode":"    public void testMultiChannelWithBarriers() throws Exception {\n        ValidatingCheckpointHandler handler = new ValidatingCheckpointHandler(1);\n        inputGate = createInputGate(3, handler);\n\n        \r\n        BufferOrEvent[] sequence1 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBarrier(1, 1),\n                        createBarrier(1, 2),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBuffer(0), \r\n                        createBarrier(1, 0));\n\n        \r\n        assertOutput(sequence1);\n        assertEquals(1L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData(sequence1[7]);\n\n        \r\n        BufferOrEvent[] sequence2 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(0),\n                        createBuffer(1),\n                        createBuffer(1),\n                        createBuffer(2),\n                        createBarrier(2, 0),\n                        createBarrier(2, 1),\n                        createBarrier(2, 2));\n\n        assertOutput(sequence2);\n        assertEquals(2L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        BufferOrEvent[] sequence3 =\n                addSequence(\n                        inputGate,\n                        createBuffer(2),\n                        createBuffer(2),\n                        createBarrier(3, 2),\n                        createBuffer(2),\n                        createBuffer(2),\n                        createBarrier(3, 0),\n                        createBarrier(3, 1));\n\n        assertOutput(sequence3);\n        assertEquals(3L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        addSequence(inputGate, createBarrier(4, 1), createBarrier(4, 2), createBarrier(4, 0));\n\n        assertOutput();\n        assertEquals(4L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        BufferOrEvent[] sequence5 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBarrier(5, 1),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBarrier(5, 2),\n                        createBuffer(1),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBarrier(5, 0));\n\n        assertOutput(sequence5);\n        assertEquals(5L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData(sequence5[4], sequence5[5], sequence5[6], sequence5[10]);\n\n        \r\n        BufferOrEvent[] sequence6 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createEndOfPartition(0),\n                        createEndOfPartition(1),\n                        createEndOfPartition(2));\n\n        assertOutput(sequence6);\n        assertInflightData();\n    }\n","date":"2021-03-31 14:27:07","endLine":289,"groupId":"102942","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testMultiChannelWithBarriers","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/59/e6237617a6bb2a59138dcbe4edc9d73e999f8a.src","preCode":"    public void testMultiChannelWithBarriers() throws Exception {\n        ValidatingCheckpointHandler handler = new ValidatingCheckpointHandler(1);\n        inputGate = createInputGate(3, handler);\n\n        \r\n        BufferOrEvent[] sequence1 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBarrier(1, 1),\n                        createBarrier(1, 2),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBuffer(0), \r\n                        createBarrier(1, 0));\n\n        \r\n        assertOutput(sequence1);\n        assertEquals(1L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData(sequence1[7]);\n\n        \r\n        BufferOrEvent[] sequence2 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(0),\n                        createBuffer(1),\n                        createBuffer(1),\n                        createBuffer(2),\n                        createBarrier(2, 0),\n                        createBarrier(2, 1),\n                        createBarrier(2, 2));\n\n        assertOutput(sequence2);\n        assertEquals(2L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        BufferOrEvent[] sequence3 =\n                addSequence(\n                        inputGate,\n                        createBuffer(2),\n                        createBuffer(2),\n                        createBarrier(3, 2),\n                        createBuffer(2),\n                        createBuffer(2),\n                        createBarrier(3, 0),\n                        createBarrier(3, 1));\n\n        assertOutput(sequence3);\n        assertEquals(3L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        addSequence(inputGate, createBarrier(4, 1), createBarrier(4, 2), createBarrier(4, 0));\n\n        assertOutput();\n        assertEquals(4L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        BufferOrEvent[] sequence5 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBarrier(5, 1),\n                        createBuffer(2),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBarrier(5, 2),\n                        createBuffer(1),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBarrier(5, 0));\n\n        assertOutput(sequence5);\n        assertEquals(5L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData(sequence5[4], sequence5[5], sequence5[6], sequence5[10]);\n\n        \r\n        BufferOrEvent[] sequence6 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createEndOfPartition(0),\n                        createEndOfPartition(1),\n                        createEndOfPartition(2));\n\n        assertOutput(sequence6);\n        assertInflightData();\n    }\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/io/checkpointing/UnalignedCheckpointsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":192,"status":"N"},{"authorDate":"2021-07-15 19:40:11","commitOrder":2,"curCode":"    public void testEarlyCleanup() throws Exception {\n        ValidatingCheckpointHandler handler = new ValidatingCheckpointHandler(1);\n        inputGate = createInputGate(3, handler, false);\n\n        \r\n        final BufferOrEvent[] sequence1 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(1),\n                        createBuffer(2),\n                        createBarrier(1, 1),\n                        createBarrier(1, 2),\n                        createBarrier(1, 0));\n        assertOutput(sequence1);\n        assertEquals(1L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        final BufferOrEvent[] sequence2 =\n                addSequence(\n                        inputGate,\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBuffer(0),\n                        createBarrier(2, 1),\n                        createBuffer(1),\n                        createBuffer(1),\n                        createEndOfPartition(1),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBarrier(2, 2),\n                        createBuffer(2),\n                        createEndOfPartition(2),\n                        createBuffer(0),\n                        createEndOfPartition(0));\n        assertOutput(sequence2);\n        assertEquals(2L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n    }\n","date":"2021-07-28 18:47:48","endLine":453,"groupId":"102942","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testEarlyCleanup","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-flink-10-0.7/blobInfo/CC_OUT/blobs/93/4c6c06fa25e66ce08223292c9a2cf71ec49771.src","preCode":"    public void testEarlyCleanup() throws Exception {\n        ValidatingCheckpointHandler handler = new ValidatingCheckpointHandler(1);\n        inputGate = createInputGate(3, handler);\n\n        \r\n        final BufferOrEvent[] sequence1 =\n                addSequence(\n                        inputGate,\n                        createBuffer(0),\n                        createBuffer(1),\n                        createBuffer(2),\n                        createBarrier(1, 1),\n                        createBarrier(1, 2),\n                        createBarrier(1, 0));\n        assertOutput(sequence1);\n        assertEquals(1L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n\n        \r\n        final BufferOrEvent[] sequence2 =\n                addSequence(\n                        inputGate,\n                        createBuffer(2),\n                        createBuffer(1),\n                        createBuffer(0),\n                        createBarrier(2, 1),\n                        createBuffer(1),\n                        createBuffer(1),\n                        createEndOfPartition(1),\n                        createBuffer(0),\n                        createBuffer(2),\n                        createBarrier(2, 2),\n                        createBuffer(2),\n                        createEndOfPartition(2),\n                        createBuffer(0),\n                        createEndOfPartition(0));\n        assertOutput(sequence2);\n        assertEquals(2L, channelStateWriter.getLastStartedCheckpointId());\n        assertInflightData();\n    }\n","realPath":"flink-streaming-java/src/test/java/org/apache/flink/streaming/runtime/io/checkpointing/UnalignedCheckpointsTest.java","repoName":"flink","snippetEndLine":0,"snippetStartLine":0,"startLine":414,"status":"M"}],"commitId":"7c902745fff13e70908d32084d2888a69e13fc8b","commitMessage":"@@@[FLINK-23460] Use a global feature flag in the CheckpointBarrierHandler\n","date":"2021-07-28 18:47:48","modifiedFileCount":"21","status":"M","submitter":"Dawid Wysakowicz"}]
