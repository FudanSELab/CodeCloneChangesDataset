[{"authorTime":"2019-03-20 05:16:53","codes":[{"authorDate":"2019-03-20 05:16:53","commitOrder":1,"curCode":"  public void testGetClusterTopology_whenMultiZones() {\n    InstanceConfig instanceConfig1 = new InstanceConfig(\"instance0\");\n    instanceConfig1.setDomain(\"helixZoneId=zone0\");\n    InstanceConfig instanceConfig2 = new InstanceConfig(\"instance1\");\n    instanceConfig2.setDomain(\"helixZoneId=zone1\");\n    List<HelixProperty> instanceConfigs = (List) ImmutableList.of(instanceConfig1, instanceConfig2);\n\n    Mock mock = new Mock();\n    when(mock.dataAccessor.keyBuilder()).thenReturn(new PropertyKey.Builder(TEST_CLUSTER));\n    when(mock.dataAccessor.getChildValues(any(PropertyKey.class))).thenReturn(instanceConfigs);\n\n    ClusterTopology clusterTopology = mock.clusterService.getClusterTopology(TEST_CLUSTER);\n\n    Assert.assertEquals(clusterTopology.getZones().size(), 2);\n    Assert.assertEquals(clusterTopology.getClusterId(), TEST_CLUSTER);\n  }\n","date":"2019-05-25 09:19:20","endLine":39,"groupId":"306","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testGetClusterTopology_whenMultiZones","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/a9/883261030eb8bf58d813b8bfd4d9bcfda0144b.src","preCode":"  public void testGetClusterTopology_whenMultiZones() {\n    InstanceConfig instanceConfig1 = new InstanceConfig(\"instance0\");\n    instanceConfig1.setDomain(\"helixZoneId=zone0\");\n    InstanceConfig instanceConfig2 = new InstanceConfig(\"instance1\");\n    instanceConfig2.setDomain(\"helixZoneId=zone1\");\n    List<HelixProperty> instanceConfigs = (List) ImmutableList.of(instanceConfig1, instanceConfig2);\n\n    Mock mock = new Mock();\n    when(mock.dataAccessor.keyBuilder()).thenReturn(new PropertyKey.Builder(TEST_CLUSTER));\n    when(mock.dataAccessor.getChildValues(any(PropertyKey.class))).thenReturn(instanceConfigs);\n\n    ClusterTopology clusterTopology = mock.clusterService.getClusterTopology(TEST_CLUSTER);\n\n    Assert.assertEquals(clusterTopology.getZones().size(), 2);\n    Assert.assertEquals(clusterTopology.getClusterId(), TEST_CLUSTER);\n  }\n","realPath":"helix-rest/src/test/java/org/apache/helix/rest/server/service/TestClusterService.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":24,"status":"B"},{"authorDate":"2019-03-20 05:16:53","commitOrder":1,"curCode":"  public void testGetClusterTopology_whenZoneHasMultiInstances() {\n    InstanceConfig instanceConfig1 = new InstanceConfig(\"instance0\");\n    instanceConfig1.setDomain(\"helixZoneId=zone0\");\n    InstanceConfig instanceConfig2 = new InstanceConfig(\"instance1\");\n    instanceConfig2.setDomain(\"helixZoneId=zone0\");\n    List<HelixProperty> instanceConfigs = (List) ImmutableList.of(instanceConfig1, instanceConfig2);\n\n    Mock mock = new Mock();\n    when(mock.dataAccessor.keyBuilder()).thenReturn(new PropertyKey.Builder(TEST_CLUSTER));\n    when(mock.dataAccessor.getChildValues(any(PropertyKey.class))).thenReturn(instanceConfigs);\n\n    ClusterTopology clusterTopology = mock.clusterService.getClusterTopology(TEST_CLUSTER);\n\n    Assert.assertEquals(clusterTopology.getZones().size(), 1);\n    Assert.assertEquals(clusterTopology.getZones().get(0).getInstances().size(), 2);\n    Assert.assertEquals(clusterTopology.getClusterId(), TEST_CLUSTER);\n  }\n","date":"2019-05-25 09:19:20","endLine":74,"groupId":"306","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testGetClusterTopology_whenZoneHasMultiInstances","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/a9/883261030eb8bf58d813b8bfd4d9bcfda0144b.src","preCode":"  public void testGetClusterTopology_whenZoneHasMultiInstances() {\n    InstanceConfig instanceConfig1 = new InstanceConfig(\"instance0\");\n    instanceConfig1.setDomain(\"helixZoneId=zone0\");\n    InstanceConfig instanceConfig2 = new InstanceConfig(\"instance1\");\n    instanceConfig2.setDomain(\"helixZoneId=zone0\");\n    List<HelixProperty> instanceConfigs = (List) ImmutableList.of(instanceConfig1, instanceConfig2);\n\n    Mock mock = new Mock();\n    when(mock.dataAccessor.keyBuilder()).thenReturn(new PropertyKey.Builder(TEST_CLUSTER));\n    when(mock.dataAccessor.getChildValues(any(PropertyKey.class))).thenReturn(instanceConfigs);\n\n    ClusterTopology clusterTopology = mock.clusterService.getClusterTopology(TEST_CLUSTER);\n\n    Assert.assertEquals(clusterTopology.getZones().size(), 1);\n    Assert.assertEquals(clusterTopology.getZones().get(0).getInstances().size(), 2);\n    Assert.assertEquals(clusterTopology.getClusterId(), TEST_CLUSTER);\n  }\n","realPath":"helix-rest/src/test/java/org/apache/helix/rest/server/service/TestClusterService.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":58,"status":"B"}],"commitId":"6e3f4734f0f43ad54f3ac7e89023a47c37d82e58","commitMessage":"@@@Implementation of ClusterService's getClusterTopology method\n\nRB=1601257\nG=helix-reviewers\nA=jxue\n\nSigned-off-by: Hunter Lee <hulee@linkedin.com>\n","date":"2019-05-25 09:19:20","modifiedFileCount":"6","status":"B","submitter":"Yi Wang"},{"authorTime":"2020-05-15 08:34:22","codes":[{"authorDate":"2020-05-15 08:34:22","commitOrder":2,"curCode":"  public void testGetClusterTopology_whenMultiZones() {\n    InstanceConfig instanceConfig1 = new InstanceConfig(\"instance0\");\n    instanceConfig1.setDomain(\"helixZoneId=zone0\");\n    InstanceConfig instanceConfig2 = new InstanceConfig(\"instance1\");\n    instanceConfig2.setDomain(\"helixZoneId=zone1\");\n    List<HelixProperty> instanceConfigs = (List) ImmutableList.of(instanceConfig1, instanceConfig2);\n\n    Mock mock = new Mock();\n    when(mock.dataAccessor.keyBuilder()).thenReturn(new PropertyKey.Builder(TEST_CLUSTER));\n    when(mock.dataAccessor.getChildValues(any(PropertyKey.class), anyBoolean())).thenReturn(instanceConfigs);\n\n    ClusterTopology clusterTopology = mock.clusterService.getClusterTopology(TEST_CLUSTER);\n\n    Assert.assertEquals(clusterTopology.getZones().size(), 2);\n    Assert.assertEquals(clusterTopology.getClusterId(), TEST_CLUSTER);\n  }\n","date":"2020-05-15 08:34:22","endLine":41,"groupId":"101080","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testGetClusterTopology_whenMultiZones","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/8f/fd5e170f432aa487ab316d0ef2915bfd1209c5.src","preCode":"  public void testGetClusterTopology_whenMultiZones() {\n    InstanceConfig instanceConfig1 = new InstanceConfig(\"instance0\");\n    instanceConfig1.setDomain(\"helixZoneId=zone0\");\n    InstanceConfig instanceConfig2 = new InstanceConfig(\"instance1\");\n    instanceConfig2.setDomain(\"helixZoneId=zone1\");\n    List<HelixProperty> instanceConfigs = (List) ImmutableList.of(instanceConfig1, instanceConfig2);\n\n    Mock mock = new Mock();\n    when(mock.dataAccessor.keyBuilder()).thenReturn(new PropertyKey.Builder(TEST_CLUSTER));\n    when(mock.dataAccessor.getChildValues(any(PropertyKey.class))).thenReturn(instanceConfigs);\n\n    ClusterTopology clusterTopology = mock.clusterService.getClusterTopology(TEST_CLUSTER);\n\n    Assert.assertEquals(clusterTopology.getZones().size(), 2);\n    Assert.assertEquals(clusterTopology.getClusterId(), TEST_CLUSTER);\n  }\n","realPath":"helix-rest/src/test/java/org/apache/helix/rest/server/service/TestClusterService.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":26,"status":"M"},{"authorDate":"2020-05-15 08:34:22","commitOrder":2,"curCode":"  public void testGetClusterTopology_whenZoneHasMultiInstances() {\n    InstanceConfig instanceConfig1 = new InstanceConfig(\"instance0\");\n    instanceConfig1.setDomain(\"helixZoneId=zone0\");\n    InstanceConfig instanceConfig2 = new InstanceConfig(\"instance1\");\n    instanceConfig2.setDomain(\"helixZoneId=zone0\");\n    List<HelixProperty> instanceConfigs = (List) ImmutableList.of(instanceConfig1, instanceConfig2);\n\n    Mock mock = new Mock();\n    when(mock.dataAccessor.keyBuilder()).thenReturn(new PropertyKey.Builder(TEST_CLUSTER));\n    when(mock.dataAccessor.getChildValues(any(PropertyKey.class), anyBoolean()))\n        .thenReturn(instanceConfigs);\n\n    ClusterTopology clusterTopology = mock.clusterService.getClusterTopology(TEST_CLUSTER);\n\n    Assert.assertEquals(clusterTopology.getZones().size(), 1);\n    Assert.assertEquals(clusterTopology.getZones().get(0).getInstances().size(), 2);\n    Assert.assertEquals(clusterTopology.getClusterId(), TEST_CLUSTER);\n  }\n","date":"2020-05-15 08:34:22","endLine":78,"groupId":"101080","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testGetClusterTopology_whenZoneHasMultiInstances","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-helix-10-0.7/blobInfo/CC_OUT/blobs/8f/fd5e170f432aa487ab316d0ef2915bfd1209c5.src","preCode":"  public void testGetClusterTopology_whenZoneHasMultiInstances() {\n    InstanceConfig instanceConfig1 = new InstanceConfig(\"instance0\");\n    instanceConfig1.setDomain(\"helixZoneId=zone0\");\n    InstanceConfig instanceConfig2 = new InstanceConfig(\"instance1\");\n    instanceConfig2.setDomain(\"helixZoneId=zone0\");\n    List<HelixProperty> instanceConfigs = (List) ImmutableList.of(instanceConfig1, instanceConfig2);\n\n    Mock mock = new Mock();\n    when(mock.dataAccessor.keyBuilder()).thenReturn(new PropertyKey.Builder(TEST_CLUSTER));\n    when(mock.dataAccessor.getChildValues(any(PropertyKey.class))).thenReturn(instanceConfigs);\n\n    ClusterTopology clusterTopology = mock.clusterService.getClusterTopology(TEST_CLUSTER);\n\n    Assert.assertEquals(clusterTopology.getZones().size(), 1);\n    Assert.assertEquals(clusterTopology.getZones().get(0).getInstances().size(), 2);\n    Assert.assertEquals(clusterTopology.getClusterId(), TEST_CLUSTER);\n  }\n","realPath":"helix-rest/src/test/java/org/apache/helix/rest/server/service/TestClusterService.java","repoName":"helix","snippetEndLine":0,"snippetStartLine":0,"startLine":61,"status":"M"}],"commitId":"6ff99f5a181fb5fe91340968f93ca2cd5329a90a","commitMessage":"@@@Enforce result check for data accessors batch get calls to prevent partial batch read. (#974)\n\nThis will help to ensure the main Helix logic does not calculate based on incomplete input.","date":"2020-05-15 08:34:22","modifiedFileCount":"49","status":"M","submitter":"Jiajun Wang"}]
