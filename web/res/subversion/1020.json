[{"authorTime":"2015-02-13 04:38:01","codes":[{"authorDate":"2015-02-13 04:38:01","commitOrder":1,"curCode":"    public void testCopyPinExternals_repo2wc() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(thisTest.getUrl() + \"/A/B\", null, null));\n        String target = thisTest.getWCPath() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false,\n                    true,       \r\n                    null,       \r\n                    null, null, null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H@2 revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","date":"2015-02-13 04:38:01","endLine":1195,"groupId":"443","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testCopyPinExternals_repo2wc","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-subversion-10-0.7/blobInfo/CC_OUT/blobs/a5/a87b924ab810da5223bb7f45b046549d4886aa.src","preCode":"    public void testCopyPinExternals_repo2wc() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(thisTest.getUrl() + \"/A/B\", null, null));\n        String target = thisTest.getWCPath() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false,\n                    true,       \r\n                    null,       \r\n                    null, null, null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H@2 revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","realPath":"subversion/bindings/javahl/tests/org/apache/subversion/javahl/BasicTests.java","repoName":"subversion","snippetEndLine":0,"snippetStartLine":0,"startLine":1173,"status":"B"},{"authorDate":"2015-02-13 04:38:01","commitOrder":1,"curCode":"    public void testCopyPinExternals_repo2repo_explicit() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        String sourceUrl = thisTest.getUrl() + \"/A/B\";\n        Map<String, List<ExternalItem>> externalsToPin =\n            new HashMap<String, List<ExternalItem>>();\n        List<ExternalItem> items = new ArrayList<ExternalItem>(1);\n        items.add(new ExternalItem(\"ADHext\", \"^/A/D/H\", null, null));\n        externalsToPin.put(sourceUrl, items);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(sourceUrl, null, null));\n        String target = thisTest.getUrl() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false,\n                    true,       \r\n                    externalsToPin,\n                    null, new ConstMsg(\"Copy WC to REPO\"), null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","date":"2015-02-13 04:38:01","endLine":1258,"groupId":"34","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testCopyPinExternals_repo2repo_explicit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-subversion-10-0.7/blobInfo/CC_OUT/blobs/a5/a87b924ab810da5223bb7f45b046549d4886aa.src","preCode":"    public void testCopyPinExternals_repo2repo_explicit() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        String sourceUrl = thisTest.getUrl() + \"/A/B\";\n        Map<String, List<ExternalItem>> externalsToPin =\n            new HashMap<String, List<ExternalItem>>();\n        List<ExternalItem> items = new ArrayList<ExternalItem>(1);\n        items.add(new ExternalItem(\"ADHext\", \"^/A/D/H\", null, null));\n        externalsToPin.put(sourceUrl, items);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(sourceUrl, null, null));\n        String target = thisTest.getUrl() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false,\n                    true,       \r\n                    externalsToPin,\n                    null, new ConstMsg(\"Copy WC to REPO\"), null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","realPath":"subversion/bindings/javahl/tests/org/apache/subversion/javahl/BasicTests.java","repoName":"subversion","snippetEndLine":0,"snippetStartLine":0,"startLine":1229,"status":"B"}],"commitId":"b35a6102af56c3255ad220d597572fc536aabe88","commitMessage":"@@@Merge the pin-externals branch to trunk.\n\nThe discussion thread start in this post:\nhttp://mail-archives.apache.org/mod_mbox/subversion-dev/201501.mbox/%3C20150128095434.GM26869%40ted.stsp.name%3E\nhas come to a consensus that the branch can be merged and additional\ndevelopment of this feature can happen on trunk.\n\nThis merge adds a '--pin-externals' option to 'svn copy'.\nThis option enables automated pinning of URLs in svn:externals properties\nduring copy operations (issue #1258).\n\n  --pin-externals          : pin externals with no explicit revision to their\n                             last-changed revision (recommended when tagging)\n\nThis feature makes the svncopy.pl contrib script unnecessary.\n\nExternals are \"pinned\" by adding a peg revision to the external's source URL.\nFor example.  the external definition:\n  ^/foo/bar ext_bar\nmight become:\n  ^/foo/bar@400 ext_bar\n\nThis table shows which revision is used for pinning:\n\n    copy source: working copy (WC)       REPOS\n   ------------+------------------------+---------------------------+\n    copy    WC | external's WC BASE rev | external's repos HEAD rev |\n    dest:      |------------------------+---------------------------+\n         REPOS | external's WC BASE rev | external's repos HEAD rev |\n   ------------+------------------------+---------------------------+\n\nAn external that is already pinned is left as-is.\n\nPlease see the branch log for details about these changes.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/subversion/trunk@1659395 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2015-02-13 04:38:01","modifiedFileCount":"3","status":"B","submitter":"Stefan Sperling"},{"authorTime":"2015-02-22 09:36:15","codes":[{"authorDate":"2015-02-22 09:36:15","commitOrder":2,"curCode":"    public void testCopyPinExternals_repo2wc() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(thisTest.getUrl() + \"/A/B\", null, null));\n        String target = thisTest.getWCPath() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false, false,\n                    true,       \r\n                    null,       \r\n                    null, null, null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H@2 revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","date":"2015-02-22 09:36:15","endLine":1195,"groupId":"443","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testCopyPinExternals_repo2wc","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-subversion-10-0.7/blobInfo/CC_OUT/blobs/c4/db11d79805a6073ca6b4867662735e9087cad0.src","preCode":"    public void testCopyPinExternals_repo2wc() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(thisTest.getUrl() + \"/A/B\", null, null));\n        String target = thisTest.getWCPath() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false,\n                    true,       \r\n                    null,       \r\n                    null, null, null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H@2 revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","realPath":"subversion/bindings/javahl/tests/org/apache/subversion/javahl/BasicTests.java","repoName":"subversion","snippetEndLine":0,"snippetStartLine":0,"startLine":1173,"status":"M"},{"authorDate":"2015-02-22 09:36:15","commitOrder":2,"curCode":"    public void testCopyPinExternals_repo2repo_explicit() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        String sourceUrl = thisTest.getUrl() + \"/A/B\";\n        Map<String, List<ExternalItem>> externalsToPin =\n            new HashMap<String, List<ExternalItem>>();\n        List<ExternalItem> items = new ArrayList<ExternalItem>(1);\n        items.add(new ExternalItem(\"ADHext\", \"^/A/D/H\", null, null));\n        externalsToPin.put(sourceUrl, items);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(sourceUrl, null, null));\n        String target = thisTest.getUrl() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false, false,\n                    true,       \r\n                    externalsToPin,\n                    null, new ConstMsg(\"Copy WC to REPO\"), null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","date":"2015-02-22 09:36:15","endLine":1258,"groupId":"34","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testCopyPinExternals_repo2repo_explicit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-subversion-10-0.7/blobInfo/CC_OUT/blobs/c4/db11d79805a6073ca6b4867662735e9087cad0.src","preCode":"    public void testCopyPinExternals_repo2repo_explicit() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        String sourceUrl = thisTest.getUrl() + \"/A/B\";\n        Map<String, List<ExternalItem>> externalsToPin =\n            new HashMap<String, List<ExternalItem>>();\n        List<ExternalItem> items = new ArrayList<ExternalItem>(1);\n        items.add(new ExternalItem(\"ADHext\", \"^/A/D/H\", null, null));\n        externalsToPin.put(sourceUrl, items);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(sourceUrl, null, null));\n        String target = thisTest.getUrl() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false,\n                    true,       \r\n                    externalsToPin,\n                    null, new ConstMsg(\"Copy WC to REPO\"), null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","realPath":"subversion/bindings/javahl/tests/org/apache/subversion/javahl/BasicTests.java","repoName":"subversion","snippetEndLine":0,"snippetStartLine":0,"startLine":1229,"status":"M"}],"commitId":"2c3b8172686bd5a6956a42c3805935f2721c5230","commitMessage":"@@@Expose the metadataOnly option that is already implemented in libsvn_client's\ncopy support through the api.\n\nThis should have been added when revving the api.  as this api has been\navailable at the libsvn_wc level since 1.8 (and at least used by AnkhSVN\nsince then).\n\n* subversion/bindings/javahl/native/org_apache_subversion_javahl_SVNClient.cpp\n  (Java_org_apache_subversion_javahl_SVNClient_copy): Pass metadataOnly.\n\n* subversion/bindings/javahl/native/SVNClient.cpp\n  (SVNClient::copy): Pass metadataOnly.\n\n* subversion/bindings/javahl/native/SVNClient.h\n  (SVNClient::copy): Pass metadataOnly.\n\n* subversion/bindings/javahl/src/org/apache/subversion/javahl/ISVNClient.java\n  (copy): Add and document metadataOnly argument.\n\n* subversion/bindings/javahl/src/org/apache/subversion/javahl/SVNClient.java\n  (copy): Add and document metadataOnly argument.\n  (copy): Update caller.\n\n* subversion/bindings/javahl/tests/org/apache/subversion/javahl/BasicTests.java\n  (testCopy. \n   testCopyPinExternals_wc2wc. \n   testCopyPinExternals_wc2repo. \n   testCopyPinExternals_repo2wc. \n   testCopyPinExternals_repo2repo. \n   testCopyPinExternals_repo2repo_explicit. \n   setupAndPerformMerge): Update caller.\n* subversion/include/svn_client.h\n  (svn_client_copy7): Add argument.\n\n* subversion/libsvn_client/copy.c\n  (svn_client_copy7): Add argument. Update caller.\n\n* subversion/libsvn_client/deprecated.c\n  (svn_client_copy6): Update caller.\n\n* subversion/svn/copy-cmd.c\n  (svn_cl__copy): Update caller.\n\n* subversion/tests/libsvn_client/client-test.c\n  (test_copy_pin_externals): Update caller.\n\n* subversion/tests/libsvn_wc/utils.c\n  (sbox_wc_copy_url): Update caller.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/subversion/trunk@1661451 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2015-02-22 09:36:15","modifiedFileCount":"3","status":"M","submitter":"Bert Huijben"},{"authorTime":"2015-04-18 05:21:57","codes":[{"authorDate":"2015-04-18 05:21:57","commitOrder":3,"curCode":"    public void testCopyPinExternals_repo2wc() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(thisTest.getUrl() + \"/A/B\", null, null));\n        String target = thisTest.getWCPath() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false, false,\n                    true,       \r\n                    null,       \r\n                    null, null, null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@2 ADHext2\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H@2 revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","date":"2015-04-18 05:21:57","endLine":1199,"groupId":"1020","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testCopyPinExternals_repo2wc","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-subversion-10-0.7/blobInfo/CC_OUT/blobs/15/5ba0f082d6e15ddd7256fa78e213bdb796d1e9.src","preCode":"    public void testCopyPinExternals_repo2wc() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(thisTest.getUrl() + \"/A/B\", null, null));\n        String target = thisTest.getWCPath() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false, false,\n                    true,       \r\n                    null,       \r\n                    null, null, null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H@2 revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","realPath":"subversion/bindings/javahl/tests/org/apache/subversion/javahl/BasicTests.java","repoName":"subversion","snippetEndLine":0,"snippetStartLine":0,"startLine":1176,"status":"M"},{"authorDate":"2015-04-18 05:21:57","commitOrder":3,"curCode":"    public void testCopyPinExternals_repo2repo_explicit() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        String sourceUrl = thisTest.getUrl() + \"/A/B\";\n        Map<String, List<ExternalItem>> externalsToPin =\n            new HashMap<String, List<ExternalItem>>();\n        List<ExternalItem> items = new ArrayList<ExternalItem>(1);\n        items.add(new ExternalItem(\"ADHext\", \"^/A/D/H\", null, null));\n        externalsToPin.put(sourceUrl, items);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(sourceUrl, null, null));\n        String target = thisTest.getUrl() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false, false,\n                    true,       \r\n                    externalsToPin,\n                    null, new ConstMsg(\"Copy WC to REPO\"), null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H ADHext2\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","date":"2015-04-18 05:21:57","endLine":1264,"groupId":"1020","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testCopyPinExternals_repo2repo_explicit","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-subversion-10-0.7/blobInfo/CC_OUT/blobs/15/5ba0f082d6e15ddd7256fa78e213bdb796d1e9.src","preCode":"    public void testCopyPinExternals_repo2repo_explicit() throws Throwable\n    {\n        \r\n        OneTest thisTest = new OneTest();\n        setupPinExternalsTest(thisTest);\n\n        String sourceUrl = thisTest.getUrl() + \"/A/B\";\n        Map<String, List<ExternalItem>> externalsToPin =\n            new HashMap<String, List<ExternalItem>>();\n        List<ExternalItem> items = new ArrayList<ExternalItem>(1);\n        items.add(new ExternalItem(\"ADHext\", \"^/A/D/H\", null, null));\n        externalsToPin.put(sourceUrl, items);\n\n        List<CopySource> sources = new ArrayList<CopySource>(1);\n        sources.add(new CopySource(sourceUrl, null, null));\n        String target = thisTest.getUrl() + \"/A/Bcopy\";\n        client.copy(sources, target, true, false, false, false,\n                    true,       \r\n                    externalsToPin,\n                    null, new ConstMsg(\"Copy WC to REPO\"), null);\n\n        \r\n        String expected = (\"^/A/D/H@2 ADHext\\n\" +\n                           \"^/A/D/H@1 peggedADHext\\n\" +\n                           \"-r1 ^/A/D/H revvedADHext\\n\");\n        String actual =\n            new String(client.propertyGet(target, \"svn:externals\", null, null));\n\n        assertEquals(expected, actual);\n    }\n","realPath":"subversion/bindings/javahl/tests/org/apache/subversion/javahl/BasicTests.java","repoName":"subversion","snippetEndLine":0,"snippetStartLine":0,"startLine":1234,"status":"M"}],"commitId":"2d4f3fa657000bf88a350f0d4054d3442ef3f8c3","commitMessage":"@@@Fix issue #4560.\n\n* subversion/libsvn_client/copy.c\n  (pin_externals_prop): When the externals_to_pin hash is not NULL. \n   do not pin externals that are not mentioned in that hash.\n\n* subversion/bindings/javahl/tests/org/apache/subversion/javahl/BasicTests.java\n  (BasicTests.setupPinExternalsTest. \n   BasicTests.testCopyPinExternals_wc2wc. \n   BasicTests.testCopyPinExternals_wc2repo. \n   BasicTests.testCopyPinExternals_repo2wc. \n   BasicTests.testCopyPinExternals_repo2repo. \n   BasicTests.testCopyPinExternals_repo2repo_explicit): Update test cases.\n  (BasicTests.testCopyPinExternals_repo2repo_corkscrew): New test case.\n\n\nPatch by: stsp\n          (Test fixes by me)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/subversion/trunk@1674406 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2015-04-18 05:21:57","modifiedFileCount":"1","status":"M","submitter":"Branko ?ibej"}]
