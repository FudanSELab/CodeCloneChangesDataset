[{"authorTime":"2021-04-08 05:40:33","codes":[{"authorDate":"2021-04-08 05:40:33","commitOrder":1,"curCode":"    void binaryRC4Encryption() throws Exception {\n        \r\n        \r\n        String password = \"pass\";\n\n        final byte[] payloadExpected;\n        try (InputStream is = POIDataSamples.getSpreadSheetInstance().openResourceAsStream(\"SimpleMultiCell.xlsx\")) {\n            payloadExpected = IOUtils.toByteArray(is);\n        }\n\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        try (POIFSFileSystem fs = new POIFSFileSystem()) {\n            EncryptionInfo ei = new EncryptionInfo(EncryptionMode.binaryRC4);\n            Encryptor enc = ei.getEncryptor();\n            enc.confirmPassword(password);\n\n            try (OutputStream os = enc.getDataStream(fs.getRoot())) {\n                os.write(payloadExpected);\n            }\n\n            fs.writeFilesystem(bos);\n        }\n\n        final byte[] payloadActual;\n        try (POIFSFileSystem fs = new POIFSFileSystem(new ByteArrayInputStream(bos.toByteArray()))) {\n            EncryptionInfo ei = new EncryptionInfo(fs);\n            Decryptor dec = ei.getDecryptor();\n            boolean b = dec.verifyPassword(password);\n            assertTrue(b);\n\n            try (InputStream is = dec.getDataStream(fs.getRoot())) {\n                payloadActual = IOUtils.toByteArray(is);\n            }\n        }\n\n        assertArrayEquals(payloadExpected, payloadActual);\n    }\n","date":"2021-04-08 05:40:33","endLine":107,"groupId":"15978","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"binaryRC4Encryption","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-poi-10-0.7/blobInfo/CC_OUT/blobs/ed/2ee87e02328c55ee06d73b2c8beff44dd16c0f.src","preCode":"    void binaryRC4Encryption() throws Exception {\n        \r\n        \r\n        String password = \"pass\";\n\n        final byte[] payloadExpected;\n        try (InputStream is = POIDataSamples.getSpreadSheetInstance().openResourceAsStream(\"SimpleMultiCell.xlsx\")) {\n            payloadExpected = IOUtils.toByteArray(is);\n        }\n\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        try (POIFSFileSystem fs = new POIFSFileSystem()) {\n            EncryptionInfo ei = new EncryptionInfo(EncryptionMode.binaryRC4);\n            Encryptor enc = ei.getEncryptor();\n            enc.confirmPassword(password);\n\n            try (OutputStream os = enc.getDataStream(fs.getRoot())) {\n                os.write(payloadExpected);\n            }\n\n            fs.writeFilesystem(bos);\n        }\n\n        final byte[] payloadActual;\n        try (POIFSFileSystem fs = new POIFSFileSystem(new ByteArrayInputStream(bos.toByteArray()))) {\n            EncryptionInfo ei = new EncryptionInfo(fs);\n            Decryptor dec = ei.getDecryptor();\n            boolean b = dec.verifyPassword(password);\n            assertTrue(b);\n\n            try (InputStream is = dec.getDataStream(fs.getRoot())) {\n                payloadActual = IOUtils.toByteArray(is);\n            }\n        }\n\n        assertArrayEquals(payloadExpected, payloadActual);\n    }\n","realPath":"poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/tests/TestEncryptor.java","repoName":"poi","snippetEndLine":0,"snippetStartLine":0,"startLine":71,"status":"B"},{"authorDate":"2021-04-08 05:40:33","commitOrder":1,"curCode":"    void tempFileAgileEncryption() throws Exception {\n        String password = \"pass\";\n\n        final byte[] payloadExpected;\n        try (InputStream is = POIDataSamples.getSpreadSheetInstance().openResourceAsStream(\"SimpleMultiCell.xlsx\")) {\n            payloadExpected = IOUtils.toByteArray(is);\n        }\n\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        try (POIFSFileSystem fs = new TempFilePOIFSFileSystem()) {\n            EncryptionInfo ei = new EncryptionInfo(EncryptionMode.agile);\n            Encryptor enc = ei.getEncryptor();\n            enc.confirmPassword(password);\n\n            try (OutputStream os = enc.getDataStream(fs.getRoot())) {\n                os.write(payloadExpected);\n            }\n\n            fs.writeFilesystem(bos);\n        }\n\n        final byte[] payloadActual;\n        try (POIFSFileSystem fs = new POIFSFileSystem(new ByteArrayInputStream(bos.toByteArray()))) {\n            EncryptionInfo ei = new EncryptionInfo(fs);\n            Decryptor dec = ei.getDecryptor();\n            boolean b = dec.verifyPassword(password);\n            assertTrue(b);\n\n            try (InputStream is = dec.getDataStream(fs.getRoot())) {\n                payloadActual = IOUtils.toByteArray(is);\n            }\n        }\n\n        assertArrayEquals(payloadExpected, payloadActual);\n    }\n","date":"2021-04-08 05:40:33","endLine":144,"groupId":"11745","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"tempFileAgileEncryption","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-poi-10-0.7/blobInfo/CC_OUT/blobs/ed/2ee87e02328c55ee06d73b2c8beff44dd16c0f.src","preCode":"    void tempFileAgileEncryption() throws Exception {\n        String password = \"pass\";\n\n        final byte[] payloadExpected;\n        try (InputStream is = POIDataSamples.getSpreadSheetInstance().openResourceAsStream(\"SimpleMultiCell.xlsx\")) {\n            payloadExpected = IOUtils.toByteArray(is);\n        }\n\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        try (POIFSFileSystem fs = new TempFilePOIFSFileSystem()) {\n            EncryptionInfo ei = new EncryptionInfo(EncryptionMode.agile);\n            Encryptor enc = ei.getEncryptor();\n            enc.confirmPassword(password);\n\n            try (OutputStream os = enc.getDataStream(fs.getRoot())) {\n                os.write(payloadExpected);\n            }\n\n            fs.writeFilesystem(bos);\n        }\n\n        final byte[] payloadActual;\n        try (POIFSFileSystem fs = new POIFSFileSystem(new ByteArrayInputStream(bos.toByteArray()))) {\n            EncryptionInfo ei = new EncryptionInfo(fs);\n            Decryptor dec = ei.getDecryptor();\n            boolean b = dec.verifyPassword(password);\n            assertTrue(b);\n\n            try (InputStream is = dec.getDataStream(fs.getRoot())) {\n                payloadActual = IOUtils.toByteArray(is);\n            }\n        }\n\n        assertArrayEquals(payloadExpected, payloadActual);\n    }\n","realPath":"poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/tests/TestEncryptor.java","repoName":"poi","snippetEndLine":0,"snippetStartLine":0,"startLine":110,"status":"B"}],"commitId":"b6aee1ef6d3e92a28ffd4b5c03e677b63b43747f","commitMessage":"@@@65206 - Migrate ant / maven to gradle build\ncompile / jar / test of mrJars\ndon't include ants build.xml anymore\nrename directories to match project and maven artifact names\nrefactor artifacts - so each project has one artifact\nreplace static references in hssf/dev tests with junit5 constructs.  which had problems in parallel tests\nincrease gradle heap to 4gb because of OOM - maybe less would also work\n\ngit-svn-id: https://svn.apache.org/repos/asf/poi/trunk@1888488 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2021-04-08 05:40:33","modifiedFileCount":"0","status":"B","submitter":"Andreas Beeker"},{"authorTime":"2021-05-14 08:37:50","codes":[{"authorDate":"2021-05-14 08:37:50","commitOrder":2,"curCode":"    void binaryRC4Encryption() throws Exception {\n        \r\n        \r\n        String password = \"pass\";\n\n        final byte[] payloadExpected;\n        try (InputStream is = POIDataSamples.getSpreadSheetInstance().openResourceAsStream(\"SimpleMultiCell.xlsx\")) {\n            payloadExpected = IOUtils.toByteArray(is);\n        }\n\n        UnsynchronizedByteArrayOutputStream bos = new UnsynchronizedByteArrayOutputStream();\n        try (POIFSFileSystem fs = new POIFSFileSystem()) {\n            EncryptionInfo ei = new EncryptionInfo(EncryptionMode.binaryRC4);\n            Encryptor enc = ei.getEncryptor();\n            enc.confirmPassword(password);\n\n            try (OutputStream os = enc.getDataStream(fs.getRoot())) {\n                os.write(payloadExpected);\n            }\n\n            fs.writeFilesystem(bos);\n        }\n\n        final byte[] payloadActual;\n        try (POIFSFileSystem fs = new POIFSFileSystem(bos.toInputStream())) {\n            EncryptionInfo ei = new EncryptionInfo(fs);\n            Decryptor dec = ei.getDecryptor();\n            boolean b = dec.verifyPassword(password);\n            assertTrue(b);\n\n            try (InputStream is = dec.getDataStream(fs.getRoot())) {\n                payloadActual = IOUtils.toByteArray(is);\n            }\n        }\n\n        assertArrayEquals(payloadExpected, payloadActual);\n    }\n","date":"2021-05-14 08:37:50","endLine":106,"groupId":"10962","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"binaryRC4Encryption","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-poi-10-0.7/blobInfo/CC_OUT/blobs/4c/d6e0e1fd83cc70c55fe8b1ec7b258476435038.src","preCode":"    void binaryRC4Encryption() throws Exception {\n        \r\n        \r\n        String password = \"pass\";\n\n        final byte[] payloadExpected;\n        try (InputStream is = POIDataSamples.getSpreadSheetInstance().openResourceAsStream(\"SimpleMultiCell.xlsx\")) {\n            payloadExpected = IOUtils.toByteArray(is);\n        }\n\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        try (POIFSFileSystem fs = new POIFSFileSystem()) {\n            EncryptionInfo ei = new EncryptionInfo(EncryptionMode.binaryRC4);\n            Encryptor enc = ei.getEncryptor();\n            enc.confirmPassword(password);\n\n            try (OutputStream os = enc.getDataStream(fs.getRoot())) {\n                os.write(payloadExpected);\n            }\n\n            fs.writeFilesystem(bos);\n        }\n\n        final byte[] payloadActual;\n        try (POIFSFileSystem fs = new POIFSFileSystem(new ByteArrayInputStream(bos.toByteArray()))) {\n            EncryptionInfo ei = new EncryptionInfo(fs);\n            Decryptor dec = ei.getDecryptor();\n            boolean b = dec.verifyPassword(password);\n            assertTrue(b);\n\n            try (InputStream is = dec.getDataStream(fs.getRoot())) {\n                payloadActual = IOUtils.toByteArray(is);\n            }\n        }\n\n        assertArrayEquals(payloadExpected, payloadActual);\n    }\n","realPath":"poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/tests/TestEncryptor.java","repoName":"poi","snippetEndLine":0,"snippetStartLine":0,"startLine":70,"status":"M"},{"authorDate":"2021-05-14 08:37:50","commitOrder":2,"curCode":"    void tempFileAgileEncryption() throws Exception {\n        String password = \"pass\";\n\n        final byte[] payloadExpected;\n        try (InputStream is = POIDataSamples.getSpreadSheetInstance().openResourceAsStream(\"SimpleMultiCell.xlsx\")) {\n            payloadExpected = IOUtils.toByteArray(is);\n        }\n\n        UnsynchronizedByteArrayOutputStream bos = new UnsynchronizedByteArrayOutputStream();\n        try (POIFSFileSystem fs = new TempFilePOIFSFileSystem()) {\n            EncryptionInfo ei = new EncryptionInfo(EncryptionMode.agile);\n            Encryptor enc = ei.getEncryptor();\n            enc.confirmPassword(password);\n\n            try (OutputStream os = enc.getDataStream(fs.getRoot())) {\n                os.write(payloadExpected);\n            }\n\n            fs.writeFilesystem(bos);\n        }\n\n        final byte[] payloadActual;\n        try (POIFSFileSystem fs = new POIFSFileSystem(bos.toInputStream())) {\n            EncryptionInfo ei = new EncryptionInfo(fs);\n            Decryptor dec = ei.getDecryptor();\n            boolean b = dec.verifyPassword(password);\n            assertTrue(b);\n\n            try (InputStream is = dec.getDataStream(fs.getRoot())) {\n                payloadActual = IOUtils.toByteArray(is);\n            }\n        }\n\n        assertArrayEquals(payloadExpected, payloadActual);\n    }\n","date":"2021-05-14 08:37:50","endLine":143,"groupId":"10962","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"tempFileAgileEncryption","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-poi-10-0.7/blobInfo/CC_OUT/blobs/4c/d6e0e1fd83cc70c55fe8b1ec7b258476435038.src","preCode":"    void tempFileAgileEncryption() throws Exception {\n        String password = \"pass\";\n\n        final byte[] payloadExpected;\n        try (InputStream is = POIDataSamples.getSpreadSheetInstance().openResourceAsStream(\"SimpleMultiCell.xlsx\")) {\n            payloadExpected = IOUtils.toByteArray(is);\n        }\n\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        try (POIFSFileSystem fs = new TempFilePOIFSFileSystem()) {\n            EncryptionInfo ei = new EncryptionInfo(EncryptionMode.agile);\n            Encryptor enc = ei.getEncryptor();\n            enc.confirmPassword(password);\n\n            try (OutputStream os = enc.getDataStream(fs.getRoot())) {\n                os.write(payloadExpected);\n            }\n\n            fs.writeFilesystem(bos);\n        }\n\n        final byte[] payloadActual;\n        try (POIFSFileSystem fs = new POIFSFileSystem(new ByteArrayInputStream(bos.toByteArray()))) {\n            EncryptionInfo ei = new EncryptionInfo(fs);\n            Decryptor dec = ei.getDecryptor();\n            boolean b = dec.verifyPassword(password);\n            assertTrue(b);\n\n            try (InputStream is = dec.getDataStream(fs.getRoot())) {\n                payloadActual = IOUtils.toByteArray(is);\n            }\n        }\n\n        assertArrayEquals(payloadExpected, payloadActual);\n    }\n","realPath":"poi-ooxml/src/test/java/org/apache/poi/poifs/crypt/tests/TestEncryptor.java","repoName":"poi","snippetEndLine":0,"snippetStartLine":0,"startLine":109,"status":"M"}],"commitId":"0614835c55f44ab6f3e9b0850ca51e0e53a65a49","commitMessage":"@@@#65304 - Add commons-io as a dependency\n\ngit-svn-id: https://svn.apache.org/repos/asf/poi/trunk@1889871 13f79535-47bb-0310-9956-ffa450edef68\n","date":"2021-05-14 08:37:50","modifiedFileCount":"277","status":"M","submitter":"Andreas Beeker"}]
