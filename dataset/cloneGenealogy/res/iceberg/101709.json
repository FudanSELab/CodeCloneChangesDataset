[{"authorTime":"2019-03-21 07:25:05","codes":[{"authorDate":"2019-03-21 07:25:05","commitOrder":1,"curCode":"  public void testEmptyTransaction() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction t = table.newTransaction();\n    t.commitTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n  }\n","date":"2019-03-21 07:25:05","endLine":43,"groupId":"4148","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testEmptyTransaction","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-iceberg-10-0.7/blobInfo/CC_OUT/blobs/5f/2fbd9fa1ba0862bd29356221cda13d6219fd2c.src","preCode":"  public void testEmptyTransaction() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction t = table.newTransaction();\n    t.commitTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n  }\n","realPath":"core/src/test/java/org/apache/iceberg/TestTransaction.java","repoName":"iceberg","snippetEndLine":0,"snippetStartLine":0,"startLine":32,"status":"B"},{"authorDate":"2019-03-21 07:25:05","commitOrder":1,"curCode":"  public void testMultipleOperationTransactionFromTable() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction t = table.newTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    t.newAppend()\n        .appendFile(FILE_A)\n        .appendFile(FILE_B)\n        .commit();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    Snapshot appendSnapshot = t.table().currentSnapshot();\n\n    t.table().newDelete()\n        .deleteFile(FILE_A)\n        .commit();\n\n    Snapshot deleteSnapshot = t.table().currentSnapshot();\n\n    Assert.assertSame(\"Base metadata should not change when an append is committed\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after append\", 0, (int) version());\n\n    t.commitTransaction();\n\n    Assert.assertEquals(\"Table should be on version 1 after commit\", 1, (int) version());\n    Assert.assertEquals(\"Table should have one manifest after commit\",\n        1, readMetadata().currentSnapshot().manifests().size());\n    Assert.assertEquals(\"Table snapshot should be the delete snapshot\",\n        deleteSnapshot, readMetadata().currentSnapshot());\n    validateManifestEntries(readMetadata().currentSnapshot().manifests().get(0),\n        ids(deleteSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.DELETED, Status.EXISTING));\n\n    Assert.assertEquals(\"Table should have a snapshot for each operation\",\n        2, readMetadata().snapshots().size());\n    validateManifestEntries(readMetadata().snapshots().get(0).manifests().get(0),\n        ids(appendSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.ADDED, Status.ADDED));\n  }\n","date":"2019-03-21 07:25:05","endLine":172,"groupId":"4484","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testMultipleOperationTransactionFromTable","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-iceberg-10-0.7/blobInfo/CC_OUT/blobs/5f/2fbd9fa1ba0862bd29356221cda13d6219fd2c.src","preCode":"  public void testMultipleOperationTransactionFromTable() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction t = table.newTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    t.newAppend()\n        .appendFile(FILE_A)\n        .appendFile(FILE_B)\n        .commit();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    Snapshot appendSnapshot = t.table().currentSnapshot();\n\n    t.table().newDelete()\n        .deleteFile(FILE_A)\n        .commit();\n\n    Snapshot deleteSnapshot = t.table().currentSnapshot();\n\n    Assert.assertSame(\"Base metadata should not change when an append is committed\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after append\", 0, (int) version());\n\n    t.commitTransaction();\n\n    Assert.assertEquals(\"Table should be on version 1 after commit\", 1, (int) version());\n    Assert.assertEquals(\"Table should have one manifest after commit\",\n        1, readMetadata().currentSnapshot().manifests().size());\n    Assert.assertEquals(\"Table snapshot should be the delete snapshot\",\n        deleteSnapshot, readMetadata().currentSnapshot());\n    validateManifestEntries(readMetadata().currentSnapshot().manifests().get(0),\n        ids(deleteSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.DELETED, Status.EXISTING));\n\n    Assert.assertEquals(\"Table should have a snapshot for each operation\",\n        2, readMetadata().snapshots().size());\n    validateManifestEntries(readMetadata().snapshots().get(0).manifests().get(0),\n        ids(appendSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.ADDED, Status.ADDED));\n  }\n","realPath":"core/src/test/java/org/apache/iceberg/TestTransaction.java","repoName":"iceberg","snippetEndLine":0,"snippetStartLine":0,"startLine":124,"status":"B"}],"commitId":"c20927801a369104e5ea510470e1cf7c8e28b808","commitMessage":"@@@Rename packages to org.apache.iceberg (#138)\n\n* Move all packages by directory (but don't change references)\n* Rename all references from com.netflix.iceberg to org.apache.iceberg\n* Reorganize all imports due to new package name.\n  Previous commit only did a string find-replace.  which made all the imports out of order. Use an IDE to auto-sort all imports.\n\n","date":"2019-03-21 07:25:05","modifiedFileCount":"0","status":"B","submitter":"mccheah"},{"authorTime":"2019-05-08 07:47:30","codes":[{"authorDate":"2019-05-08 07:47:30","commitOrder":2,"curCode":"  public void testEmptyTransaction() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction txn = table.newTransaction();\n    txn.commitTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n  }\n","date":"2019-05-08 07:47:30","endLine":43,"groupId":"1864","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testEmptyTransaction","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-iceberg-10-0.7/blobInfo/CC_OUT/blobs/14/1e95e6268871285ad6cf4b56157489020034eb.src","preCode":"  public void testEmptyTransaction() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction t = table.newTransaction();\n    t.commitTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n  }\n","realPath":"core/src/test/java/org/apache/iceberg/TestTransaction.java","repoName":"iceberg","snippetEndLine":0,"snippetStartLine":0,"startLine":32,"status":"M"},{"authorDate":"2019-05-08 07:47:30","commitOrder":2,"curCode":"  public void testMultipleOperationTransactionFromTable() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction txn = table.newTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    txn.newAppend()\n        .appendFile(FILE_A)\n        .appendFile(FILE_B)\n        .commit();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    Snapshot appendSnapshot = txn.table().currentSnapshot();\n\n    txn.table().newDelete()\n        .deleteFile(FILE_A)\n        .commit();\n\n    Snapshot deleteSnapshot = txn.table().currentSnapshot();\n\n    Assert.assertSame(\"Base metadata should not change when an append is committed\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after append\", 0, (int) version());\n\n    txn.commitTransaction();\n\n    Assert.assertEquals(\"Table should be on version 1 after commit\", 1, (int) version());\n    Assert.assertEquals(\"Table should have one manifest after commit\",\n        1, readMetadata().currentSnapshot().manifests().size());\n    Assert.assertEquals(\"Table snapshot should be the delete snapshot\",\n        deleteSnapshot, readMetadata().currentSnapshot());\n    validateManifestEntries(readMetadata().currentSnapshot().manifests().get(0),\n        ids(deleteSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.DELETED, Status.EXISTING));\n\n    Assert.assertEquals(\"Table should have a snapshot for each operation\",\n        2, readMetadata().snapshots().size());\n    validateManifestEntries(readMetadata().snapshots().get(0).manifests().get(0),\n        ids(appendSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.ADDED, Status.ADDED));\n  }\n","date":"2019-05-08 07:47:30","endLine":172,"groupId":"4484","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testMultipleOperationTransactionFromTable","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-iceberg-10-0.7/blobInfo/CC_OUT/blobs/14/1e95e6268871285ad6cf4b56157489020034eb.src","preCode":"  public void testMultipleOperationTransactionFromTable() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction t = table.newTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    t.newAppend()\n        .appendFile(FILE_A)\n        .appendFile(FILE_B)\n        .commit();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    Snapshot appendSnapshot = t.table().currentSnapshot();\n\n    t.table().newDelete()\n        .deleteFile(FILE_A)\n        .commit();\n\n    Snapshot deleteSnapshot = t.table().currentSnapshot();\n\n    Assert.assertSame(\"Base metadata should not change when an append is committed\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after append\", 0, (int) version());\n\n    t.commitTransaction();\n\n    Assert.assertEquals(\"Table should be on version 1 after commit\", 1, (int) version());\n    Assert.assertEquals(\"Table should have one manifest after commit\",\n        1, readMetadata().currentSnapshot().manifests().size());\n    Assert.assertEquals(\"Table snapshot should be the delete snapshot\",\n        deleteSnapshot, readMetadata().currentSnapshot());\n    validateManifestEntries(readMetadata().currentSnapshot().manifests().get(0),\n        ids(deleteSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.DELETED, Status.EXISTING));\n\n    Assert.assertEquals(\"Table should have a snapshot for each operation\",\n        2, readMetadata().snapshots().size());\n    validateManifestEntries(readMetadata().snapshots().get(0).manifests().get(0),\n        ids(appendSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.ADDED, Status.ADDED));\n  }\n","realPath":"core/src/test/java/org/apache/iceberg/TestTransaction.java","repoName":"iceberg","snippetEndLine":0,"snippetStartLine":0,"startLine":124,"status":"M"}],"commitId":"5d781f19ad0bfdba2523c8483d51bf3cf31c7d81","commitMessage":"@@@Apply baseline linting to iceberg-core (#153)\n\n","date":"2019-05-08 07:47:30","modifiedFileCount":"88","status":"M","submitter":"mccheah"},{"authorTime":"2020-06-03 03:43:03","codes":[{"authorDate":"2019-05-08 07:47:30","commitOrder":3,"curCode":"  public void testEmptyTransaction() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction txn = table.newTransaction();\n    txn.commitTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n  }\n","date":"2019-05-08 07:47:30","endLine":43,"groupId":"101709","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testEmptyTransaction","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-iceberg-10-0.7/blobInfo/CC_OUT/blobs/14/1e95e6268871285ad6cf4b56157489020034eb.src","preCode":"  public void testEmptyTransaction() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction txn = table.newTransaction();\n    txn.commitTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n  }\n","realPath":"core/src/test/java/org/apache/iceberg/TestTransaction.java","repoName":"iceberg","snippetEndLine":0,"snippetStartLine":0,"startLine":32,"status":"N"},{"authorDate":"2020-06-03 03:43:03","commitOrder":3,"curCode":"  public void testMultipleOperationTransactionFromTable() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction txn = table.newTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    txn.newAppend()\n        .appendFile(FILE_A)\n        .appendFile(FILE_B)\n        .commit();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    Snapshot appendSnapshot = txn.table().currentSnapshot();\n\n    txn.table().newDelete()\n        .deleteFile(FILE_A)\n        .commit();\n\n    Snapshot deleteSnapshot = txn.table().currentSnapshot();\n\n    Assert.assertSame(\"Base metadata should not change when an append is committed\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after append\", 0, (int) version());\n\n    txn.commitTransaction();\n\n    Assert.assertEquals(\"Table should be on version 1 after commit\", 1, (int) version());\n    Assert.assertEquals(\"Table should have one manifest after commit\",\n        1, readMetadata().currentSnapshot().allManifests().size());\n    Assert.assertEquals(\"Table snapshot should be the delete snapshot\",\n        deleteSnapshot, readMetadata().currentSnapshot());\n    validateManifestEntries(readMetadata().currentSnapshot().allManifests().get(0),\n        ids(deleteSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.DELETED, Status.EXISTING));\n\n    Assert.assertEquals(\"Table should have a snapshot for each operation\",\n        2, readMetadata().snapshots().size());\n    validateManifestEntries(readMetadata().snapshots().get(0).allManifests().get(0),\n        ids(appendSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.ADDED, Status.ADDED));\n  }\n","date":"2020-06-03 03:43:03","endLine":192,"groupId":"101709","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testMultipleOperationTransactionFromTable","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-iceberg-10-0.7/blobInfo/CC_OUT/blobs/21/82608d31a3cfeda892f341a60ab13bce575ee9.src","preCode":"  public void testMultipleOperationTransactionFromTable() {\n    Assert.assertEquals(\"Table should be on version 0\", 0, (int) version());\n\n    TableMetadata base = readMetadata();\n\n    Transaction txn = table.newTransaction();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    txn.newAppend()\n        .appendFile(FILE_A)\n        .appendFile(FILE_B)\n        .commit();\n\n    Assert.assertSame(\"Base metadata should not change when commit is created\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after txn create\", 0, (int) version());\n\n    Snapshot appendSnapshot = txn.table().currentSnapshot();\n\n    txn.table().newDelete()\n        .deleteFile(FILE_A)\n        .commit();\n\n    Snapshot deleteSnapshot = txn.table().currentSnapshot();\n\n    Assert.assertSame(\"Base metadata should not change when an append is committed\",\n        base, readMetadata());\n    Assert.assertEquals(\"Table should be on version 0 after append\", 0, (int) version());\n\n    txn.commitTransaction();\n\n    Assert.assertEquals(\"Table should be on version 1 after commit\", 1, (int) version());\n    Assert.assertEquals(\"Table should have one manifest after commit\",\n        1, readMetadata().currentSnapshot().manifests().size());\n    Assert.assertEquals(\"Table snapshot should be the delete snapshot\",\n        deleteSnapshot, readMetadata().currentSnapshot());\n    validateManifestEntries(readMetadata().currentSnapshot().manifests().get(0),\n        ids(deleteSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.DELETED, Status.EXISTING));\n\n    Assert.assertEquals(\"Table should have a snapshot for each operation\",\n        2, readMetadata().snapshots().size());\n    validateManifestEntries(readMetadata().snapshots().get(0).manifests().get(0),\n        ids(appendSnapshot.snapshotId(), appendSnapshot.snapshotId()),\n        files(FILE_A, FILE_B), statuses(Status.ADDED, Status.ADDED));\n  }\n","realPath":"core/src/test/java/org/apache/iceberg/TestTransaction.java","repoName":"iceberg","snippetEndLine":0,"snippetStartLine":0,"startLine":144,"status":"M"}],"commitId":"482f420141486f5b7b02bd62dc14cdb94b9a9cca","commitMessage":"@@@Split Snapshot.manifests into dataManifests and deleteManifests (#1080)\n\nThis replaces all calls to Snapshot.manifests with calls to one of 3 new methods:\n\n* `Snapshot.allManifests` returns both delete and data manifests\n* `Snapshot.deleteManifests` returns only delete manifests\n* `Snapshot.dataManifests` returns only data manifests\n\nExisting references mostly use either `allManifests` or `dataManifests`.  depending on the context. For example.  tests with assertions for the number of manifests use `allManifests` because the test cases should validate there are no new delete manifests.  but other tests that validate rewritten manifests are deleted use `dataManifests` because only data manifests are rewritten and deleted.\n\nThis tries to make minimal changes that preserve the current behavior. Operations are not updated to support delete manifests (rewrite still only rewrites data manifests).  but will carry through the list of delete manifests correctly.","date":"2020-06-03 03:43:03","modifiedFileCount":"46","status":"M","submitter":"Ryan Blue"}]
