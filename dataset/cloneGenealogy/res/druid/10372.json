[{"authorTime":"2021-03-03 03:23:52","codes":[{"authorDate":"2021-03-03 03:23:52","commitOrder":2,"curCode":"  public void testSerdeGranularitySpec() throws IOException\n  {\n    final DataSourceCompactionConfig config = new DataSourceCompactionConfig(\n        \"dataSource\",\n        null,\n        500L,\n        null,\n        new Period(3600),\n        null,\n        new UserCompactionTaskGranularityConfig(Granularities.HOUR, null),\n        ImmutableMap.of(\"key\", \"val\")\n    );\n    final String json = OBJECT_MAPPER.writeValueAsString(config);\n    final DataSourceCompactionConfig fromJson = OBJECT_MAPPER.readValue(json, DataSourceCompactionConfig.class);\n\n    Assert.assertEquals(config.getDataSource(), fromJson.getDataSource());\n    Assert.assertEquals(25, fromJson.getTaskPriority());\n    Assert.assertEquals(config.getInputSegmentSizeBytes(), fromJson.getInputSegmentSizeBytes());\n    Assert.assertEquals(config.getMaxRowsPerSegment(), fromJson.getMaxRowsPerSegment());\n    Assert.assertEquals(config.getSkipOffsetFromLatest(), fromJson.getSkipOffsetFromLatest());\n    Assert.assertEquals(config.getTuningConfig(), fromJson.getTuningConfig());\n    Assert.assertEquals(config.getTaskContext(), fromJson.getTaskContext());\n    Assert.assertEquals(config.getGranularitySpec(), fromJson.getGranularitySpec());\n  }\n","date":"2021-03-03 03:23:52","endLine":251,"groupId":"18284","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testSerdeGranularitySpec","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/ef/e04e37ccbb380ba7ec5d45a132c30344e19cca.src","preCode":"  public void testSerdeGranularitySpec() throws IOException\n  {\n    final DataSourceCompactionConfig config = new DataSourceCompactionConfig(\n        \"dataSource\",\n        null,\n        500L,\n        null,\n        new Period(3600),\n        null,\n        new UserCompactionTaskGranularityConfig(Granularities.HOUR, null),\n        ImmutableMap.of(\"key\", \"val\")\n    );\n    final String json = OBJECT_MAPPER.writeValueAsString(config);\n    final DataSourceCompactionConfig fromJson = OBJECT_MAPPER.readValue(json, DataSourceCompactionConfig.class);\n\n    Assert.assertEquals(config.getDataSource(), fromJson.getDataSource());\n    Assert.assertEquals(25, fromJson.getTaskPriority());\n    Assert.assertEquals(config.getInputSegmentSizeBytes(), fromJson.getInputSegmentSizeBytes());\n    Assert.assertEquals(config.getMaxRowsPerSegment(), fromJson.getMaxRowsPerSegment());\n    Assert.assertEquals(config.getSkipOffsetFromLatest(), fromJson.getSkipOffsetFromLatest());\n    Assert.assertEquals(config.getTuningConfig(), fromJson.getTuningConfig());\n    Assert.assertEquals(config.getTaskContext(), fromJson.getTaskContext());\n    Assert.assertEquals(config.getGranularitySpec(), fromJson.getGranularitySpec());\n  }\n","realPath":"server/src/test/java/org/apache/druid/server/coordinator/DataSourceCompactionConfigTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":228,"status":"MB"},{"authorDate":"2021-03-03 03:23:52","commitOrder":2,"curCode":"  public void testSerdeWithNullGranularitySpec() throws IOException\n  {\n    final DataSourceCompactionConfig config = new DataSourceCompactionConfig(\n        \"dataSource\",\n        null,\n        500L,\n        null,\n        new Period(3600),\n        null,\n        null,\n        ImmutableMap.of(\"key\", \"val\")\n    );\n    final String json = OBJECT_MAPPER.writeValueAsString(config);\n    final DataSourceCompactionConfig fromJson = OBJECT_MAPPER.readValue(json, DataSourceCompactionConfig.class);\n\n    Assert.assertEquals(config.getDataSource(), fromJson.getDataSource());\n    Assert.assertEquals(25, fromJson.getTaskPriority());\n    Assert.assertEquals(config.getInputSegmentSizeBytes(), fromJson.getInputSegmentSizeBytes());\n    Assert.assertEquals(config.getMaxRowsPerSegment(), fromJson.getMaxRowsPerSegment());\n    Assert.assertEquals(config.getSkipOffsetFromLatest(), fromJson.getSkipOffsetFromLatest());\n    Assert.assertEquals(config.getTuningConfig(), fromJson.getTuningConfig());\n    Assert.assertEquals(config.getTaskContext(), fromJson.getTaskContext());\n    Assert.assertEquals(config.getGranularitySpec(), fromJson.getGranularitySpec());\n  }\n","date":"2021-03-03 03:23:52","endLine":292,"groupId":"18284","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testSerdeWithNullGranularitySpec","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/ef/e04e37ccbb380ba7ec5d45a132c30344e19cca.src","preCode":"  public void testSerdeWithNullGranularitySpec() throws IOException\n  {\n    final DataSourceCompactionConfig config = new DataSourceCompactionConfig(\n        \"dataSource\",\n        null,\n        500L,\n        null,\n        new Period(3600),\n        null,\n        null,\n        ImmutableMap.of(\"key\", \"val\")\n    );\n    final String json = OBJECT_MAPPER.writeValueAsString(config);\n    final DataSourceCompactionConfig fromJson = OBJECT_MAPPER.readValue(json, DataSourceCompactionConfig.class);\n\n    Assert.assertEquals(config.getDataSource(), fromJson.getDataSource());\n    Assert.assertEquals(25, fromJson.getTaskPriority());\n    Assert.assertEquals(config.getInputSegmentSizeBytes(), fromJson.getInputSegmentSizeBytes());\n    Assert.assertEquals(config.getMaxRowsPerSegment(), fromJson.getMaxRowsPerSegment());\n    Assert.assertEquals(config.getSkipOffsetFromLatest(), fromJson.getSkipOffsetFromLatest());\n    Assert.assertEquals(config.getTuningConfig(), fromJson.getTuningConfig());\n    Assert.assertEquals(config.getTaskContext(), fromJson.getTaskContext());\n    Assert.assertEquals(config.getGranularitySpec(), fromJson.getGranularitySpec());\n  }\n","realPath":"server/src/test/java/org/apache/druid/server/coordinator/DataSourceCompactionConfigTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":269,"status":"B"}],"commitId":"b7b0ee83627dd7887392e8f9d6fb5cb29465c28c","commitMessage":"@@@Add query granularity to compaction task (#10900)\n\n* add query granularity to compaction task\n\n* fix checkstyle\n\n* fix checkstyle\n\n* fix test\n\n* fix test\n\n* add tests\n\n* fix test\n\n* fix test\n\n* cleanup\n\n* rename class\n\n* fix test\n\n* fix test\n\n* add test\n\n* fix test","date":"2021-03-03 03:23:52","modifiedFileCount":"15","status":"M","submitter":"Maytas Monsereenusorn"},{"authorTime":"2021-04-09 15:12:28","codes":[{"authorDate":"2021-04-09 15:12:28","commitOrder":3,"curCode":"  public void testSerdeGranularitySpec() throws IOException\n  {\n    final DataSourceCompactionConfig config = new DataSourceCompactionConfig(\n        \"dataSource\",\n        null,\n        500L,\n        null,\n        new Period(3600),\n        null,\n        new UserCompactionTaskGranularityConfig(Granularities.HOUR, null),\n        null,\n        ImmutableMap.of(\"key\", \"val\")\n    );\n    final String json = OBJECT_MAPPER.writeValueAsString(config);\n    final DataSourceCompactionConfig fromJson = OBJECT_MAPPER.readValue(json, DataSourceCompactionConfig.class);\n\n    Assert.assertEquals(config.getDataSource(), fromJson.getDataSource());\n    Assert.assertEquals(25, fromJson.getTaskPriority());\n    Assert.assertEquals(config.getInputSegmentSizeBytes(), fromJson.getInputSegmentSizeBytes());\n    Assert.assertEquals(config.getMaxRowsPerSegment(), fromJson.getMaxRowsPerSegment());\n    Assert.assertEquals(config.getSkipOffsetFromLatest(), fromJson.getSkipOffsetFromLatest());\n    Assert.assertEquals(config.getTuningConfig(), fromJson.getTuningConfig());\n    Assert.assertEquals(config.getTaskContext(), fromJson.getTaskContext());\n    Assert.assertEquals(config.getGranularitySpec(), fromJson.getGranularitySpec());\n  }\n","date":"2021-04-09 15:12:28","endLine":256,"groupId":"10372","id":3,"instanceNumber":1,"isCurCommit":1,"methodName":"testSerdeGranularitySpec","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/c7/98d29e1ea9141f79391f5bbdb1f13b179a0d19.src","preCode":"  public void testSerdeGranularitySpec() throws IOException\n  {\n    final DataSourceCompactionConfig config = new DataSourceCompactionConfig(\n        \"dataSource\",\n        null,\n        500L,\n        null,\n        new Period(3600),\n        null,\n        new UserCompactionTaskGranularityConfig(Granularities.HOUR, null),\n        ImmutableMap.of(\"key\", \"val\")\n    );\n    final String json = OBJECT_MAPPER.writeValueAsString(config);\n    final DataSourceCompactionConfig fromJson = OBJECT_MAPPER.readValue(json, DataSourceCompactionConfig.class);\n\n    Assert.assertEquals(config.getDataSource(), fromJson.getDataSource());\n    Assert.assertEquals(25, fromJson.getTaskPriority());\n    Assert.assertEquals(config.getInputSegmentSizeBytes(), fromJson.getInputSegmentSizeBytes());\n    Assert.assertEquals(config.getMaxRowsPerSegment(), fromJson.getMaxRowsPerSegment());\n    Assert.assertEquals(config.getSkipOffsetFromLatest(), fromJson.getSkipOffsetFromLatest());\n    Assert.assertEquals(config.getTuningConfig(), fromJson.getTuningConfig());\n    Assert.assertEquals(config.getTaskContext(), fromJson.getTaskContext());\n    Assert.assertEquals(config.getGranularitySpec(), fromJson.getGranularitySpec());\n  }\n","realPath":"server/src/test/java/org/apache/druid/server/coordinator/DataSourceCompactionConfigTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":232,"status":"M"},{"authorDate":"2021-04-09 15:12:28","commitOrder":3,"curCode":"  public void testSerdeWithNullGranularitySpec() throws IOException\n  {\n    final DataSourceCompactionConfig config = new DataSourceCompactionConfig(\n        \"dataSource\",\n        null,\n        500L,\n        null,\n        new Period(3600),\n        null,\n        null,\n        null,\n        ImmutableMap.of(\"key\", \"val\")\n    );\n    final String json = OBJECT_MAPPER.writeValueAsString(config);\n    final DataSourceCompactionConfig fromJson = OBJECT_MAPPER.readValue(json, DataSourceCompactionConfig.class);\n\n    Assert.assertEquals(config.getDataSource(), fromJson.getDataSource());\n    Assert.assertEquals(25, fromJson.getTaskPriority());\n    Assert.assertEquals(config.getInputSegmentSizeBytes(), fromJson.getInputSegmentSizeBytes());\n    Assert.assertEquals(config.getMaxRowsPerSegment(), fromJson.getMaxRowsPerSegment());\n    Assert.assertEquals(config.getSkipOffsetFromLatest(), fromJson.getSkipOffsetFromLatest());\n    Assert.assertEquals(config.getTuningConfig(), fromJson.getTuningConfig());\n    Assert.assertEquals(config.getTaskContext(), fromJson.getTaskContext());\n    Assert.assertEquals(config.getGranularitySpec(), fromJson.getGranularitySpec());\n  }\n","date":"2021-04-09 15:12:28","endLine":299,"groupId":"10372","id":4,"instanceNumber":2,"isCurCommit":1,"methodName":"testSerdeWithNullGranularitySpec","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/c7/98d29e1ea9141f79391f5bbdb1f13b179a0d19.src","preCode":"  public void testSerdeWithNullGranularitySpec() throws IOException\n  {\n    final DataSourceCompactionConfig config = new DataSourceCompactionConfig(\n        \"dataSource\",\n        null,\n        500L,\n        null,\n        new Period(3600),\n        null,\n        null,\n        ImmutableMap.of(\"key\", \"val\")\n    );\n    final String json = OBJECT_MAPPER.writeValueAsString(config);\n    final DataSourceCompactionConfig fromJson = OBJECT_MAPPER.readValue(json, DataSourceCompactionConfig.class);\n\n    Assert.assertEquals(config.getDataSource(), fromJson.getDataSource());\n    Assert.assertEquals(25, fromJson.getTaskPriority());\n    Assert.assertEquals(config.getInputSegmentSizeBytes(), fromJson.getInputSegmentSizeBytes());\n    Assert.assertEquals(config.getMaxRowsPerSegment(), fromJson.getMaxRowsPerSegment());\n    Assert.assertEquals(config.getSkipOffsetFromLatest(), fromJson.getSkipOffsetFromLatest());\n    Assert.assertEquals(config.getTuningConfig(), fromJson.getTuningConfig());\n    Assert.assertEquals(config.getTaskContext(), fromJson.getTaskContext());\n    Assert.assertEquals(config.getGranularitySpec(), fromJson.getGranularitySpec());\n  }\n","realPath":"server/src/test/java/org/apache/druid/server/coordinator/DataSourceCompactionConfigTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":275,"status":"M"}],"commitId":"4576152e4a0213d17048a330e7089aa9d89f3972","commitMessage":"@@@Make dropExisting flag for Compaction configurable and add warning documentations (#11070)\n\n* Make dropExisting flag for Compaction configurable\n\n* fix checkstyle\n\n* fix checkstyle\n\n* fix test\n\n* add tests\n\n* fix spelling\n\n* fix docs\n\n* add IT\n\n* fix test\n\n* fix doc\n\n* fix doc","date":"2021-04-09 15:12:28","modifiedFileCount":"20","status":"M","submitter":"Maytas Monsereenusorn"}]
