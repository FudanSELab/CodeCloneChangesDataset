[{"authorTime":"2019-01-04 10:00:04","codes":[{"authorDate":"2019-01-04 10:00:04","commitOrder":1,"curCode":"  public void testNestedQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.log(new RequestLogLine(\n        timestamp,\n        remoteAddr,\n        nestedQuery,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(baos.toByteArray());\n    Assert.assertEquals(\"datasource\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","date":"2019-01-04 10:00:04","endLine":242,"groupId":"14541","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testNestedQueryLoggingMDC","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/96/e3f72d707d9f478fe57b8d83f3096a379d8552.src","preCode":"  public void testNestedQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.log(new RequestLogLine(\n        timestamp,\n        remoteAddr,\n        nestedQuery,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(baos.toByteArray());\n    Assert.assertEquals(\"datasource\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","realPath":"server/src/test/java/org/apache/druid/server/log/LoggingRequestLoggerTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":224,"status":"B"},{"authorDate":"2019-01-04 10:00:04","commitOrder":1,"curCode":"  public void testUnionQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.log(new RequestLogLine(\n        timestamp,\n        remoteAddr,\n        unionQuery,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(baos.toByteArray());\n    Assert.assertEquals(\"A,B\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","date":"2019-01-04 10:00:04","endLine":284,"groupId":"14541","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testUnionQueryLoggingMDC","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/96/e3f72d707d9f478fe57b8d83f3096a379d8552.src","preCode":"  public void testUnionQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.log(new RequestLogLine(\n        timestamp,\n        remoteAddr,\n        unionQuery,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(baos.toByteArray());\n    Assert.assertEquals(\"A,B\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","realPath":"server/src/test/java/org/apache/druid/server/log/LoggingRequestLoggerTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":266,"status":"B"}],"commitId":"832a3b16edd1f099b7a804d07ff2ed15cedd861c","commitMessage":"@@@Improve slfj logger input for MDC field:datasource (#6787)\n\n* improve slfj logger  MDC datasource input\n\n* add some UT and isNested field\n","date":"2019-01-04 10:00:04","modifiedFileCount":"2","status":"B","submitter":"elloooooo"},{"authorTime":"2019-01-16 15:12:59","codes":[{"authorDate":"2019-01-16 15:12:59","commitOrder":2,"curCode":"  public void testNestedQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.logNativeQuery(RequestLogLine.forNative(\n        nestedQuery,\n        timestamp,\n        remoteAddr,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(baos.toByteArray());\n    Assert.assertEquals(\"datasource\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","date":"2019-01-16 15:12:59","endLine":242,"groupId":"14541","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testNestedQueryLoggingMDC","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/9d/938f012a39f221a16641497132166424e9d850.src","preCode":"  public void testNestedQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.log(new RequestLogLine(\n        timestamp,\n        remoteAddr,\n        nestedQuery,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(baos.toByteArray());\n    Assert.assertEquals(\"datasource\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","realPath":"server/src/test/java/org/apache/druid/server/log/LoggingRequestLoggerTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":224,"status":"M"},{"authorDate":"2019-01-16 15:12:59","commitOrder":2,"curCode":"  public void testUnionQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.logNativeQuery(RequestLogLine.forNative(\n        unionQuery,\n        timestamp,\n        remoteAddr,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(baos.toByteArray());\n    Assert.assertEquals(\"A,B\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","date":"2019-01-16 15:12:59","endLine":284,"groupId":"14541","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testUnionQueryLoggingMDC","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/9d/938f012a39f221a16641497132166424e9d850.src","preCode":"  public void testUnionQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.log(new RequestLogLine(\n        timestamp,\n        remoteAddr,\n        unionQuery,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(baos.toByteArray());\n    Assert.assertEquals(\"A,B\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","realPath":"server/src/test/java/org/apache/druid/server/log/LoggingRequestLoggerTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":266,"status":"M"}],"commitId":"5b8a221713615fff53cbd352cda925ecb1334d98","commitMessage":"@@@Add SQL id.  request logs.  and metrics (#6302)\n\n* use SqlLifecyle to manage sql execution.  add sqlId\n\n* add sql request logger\n\n* fix UT\n\n* rename sqlId to sqlQueryId.  sql/time to sqlQuery/time.  etc\n\n* add docs and more sql request logger impls\n\n* add UT for http and jdbc\n\n* fix forbidden use of com.google.common.base.Charsets\n\n* fix UT in QuantileSqlAggregatorTest.  supressed unused warning of getSqlQueryId\n\n* do not use default method in QueryMetrics interface\n\n* capitalize 'sql' everywhere in the non-property parts of the docs\n\n* use RequestLogger interface to log sql query\n\n* minor bugfixes and add switching request logger\n\n* add filePattern configs for FileRequestLogger\n\n* address review comments.  adjust sql request log format\n\n* fix inspection error\n\n* try SuppressWarnings(\"RedundantThrows\") to fix inspection error on ComposingRequestLoggerProvider\n","date":"2019-01-16 15:12:59","modifiedFileCount":"44","status":"M","submitter":"Dayue Gao"},{"authorTime":"2019-08-23 18:13:54","codes":[{"authorDate":"2019-08-23 18:13:54","commitOrder":3,"curCode":"  public void testNestedQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.logNativeQuery(RequestLogLine.forNative(\n        nestedQuery,\n        timestamp,\n        remoteAddr,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(BAOS.toByteArray());\n    Assert.assertEquals(\"datasource\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","date":"2019-08-23 18:13:54","endLine":242,"groupId":"10768","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testNestedQueryLoggingMDC","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/b7/e40bfe21756bc9564282c7d8d18d4f8dd728b5.src","preCode":"  public void testNestedQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.logNativeQuery(RequestLogLine.forNative(\n        nestedQuery,\n        timestamp,\n        remoteAddr,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(baos.toByteArray());\n    Assert.assertEquals(\"datasource\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","realPath":"server/src/test/java/org/apache/druid/server/log/LoggingRequestLoggerTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":224,"status":"M"},{"authorDate":"2019-08-23 18:13:54","commitOrder":3,"curCode":"  public void testUnionQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.logNativeQuery(RequestLogLine.forNative(\n        unionQuery,\n        timestamp,\n        remoteAddr,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(BAOS.toByteArray());\n    Assert.assertEquals(\"A,B\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","date":"2019-08-23 18:13:54","endLine":284,"groupId":"10768","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testUnionQueryLoggingMDC","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-druid-10-0.7/blobInfo/CC_OUT/blobs/b7/e40bfe21756bc9564282c7d8d18d4f8dd728b5.src","preCode":"  public void testUnionQueryLoggingMDC() throws Exception\n  {\n    final LoggingRequestLogger requestLogger = new LoggingRequestLogger(new DefaultObjectMapper(), true, false);\n    requestLogger.logNativeQuery(RequestLogLine.forNative(\n        unionQuery,\n        timestamp,\n        remoteAddr,\n        queryStats\n    ));\n    final Map<String, Object> map = readContextMap(baos.toByteArray());\n    Assert.assertEquals(\"A,B\", map.get(\"dataSource\"));\n    Assert.assertEquals(\"true\", map.get(\"isNested\"));\n    Assert.assertEquals(\"PT86400S\", map.get(\"duration\"));\n    Assert.assertEquals(\"false\", map.get(\"hasFilters\"));\n    Assert.assertEquals(\"fake\", map.get(\"queryType\"));\n    Assert.assertEquals(\"some.host.tld\", map.get(\"remoteAddr\"));\n    Assert.assertEquals(\"false\", map.get(\"descending\"));\n    Assert.assertNull(map.get(\"foo\"));\n  }\n","realPath":"server/src/test/java/org/apache/druid/server/log/LoggingRequestLoggerTest.java","repoName":"druid","snippetEndLine":0,"snippetStartLine":0,"startLine":266,"status":"M"}],"commitId":"33f0753a70361e7d345a488034f76a889f7c3682","commitMessage":"@@@Add Checkstyle for constant name static final (#8060)\n\n* check ctyle for constant field name\n\n* check ctyle for constant field name\n\n* check ctyle for constant field name\n\n* check ctyle for constant field name\n\n* check ctyle for constant field name\n\n* check ctyle for constant field name\n\n* check ctyle for constant field name\n\n* check ctyle for constant field name\n\n* check ctyle for constant field name\n\n* merging with upstream\n\n* review-1\n\n* unknow changes\n\n* unknow changes\n\n* review-2\n\n* merging with master\n\n* review-2 1 changes\n\n* review changes-2 2\n\n* bug fix\n","date":"2019-08-23 18:13:54","modifiedFileCount":"298","status":"M","submitter":"SandishKumarHN"}]
