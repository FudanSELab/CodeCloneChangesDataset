[{"authorTime":"2018-07-16 16:30:07","codes":[{"authorDate":"2018-04-26 03:22:53","commitOrder":2,"curCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new Index(\"index\", \"uuid\"), 0, null));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).getQualityLevel(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).getQualityLevel(), DELTA);\n    }\n","date":"2018-04-26 03:22:53","endLine":96,"groupId":"61564","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testDCGAt","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ba/03a734ec760f944f6bd82b7cb82bd662f4770b.src","preCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new Index(\"index\", \"uuid\"), 0, null));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).getQualityLevel(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).getQualityLevel(), DELTA);\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/DiscountedCumulativeGainTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":67,"status":"NB"},{"authorDate":"2018-07-16 16:30:07","commitOrder":2,"curCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new Index(\"index\", \"uuid\"), 0, null));\n        }\n        return hits;\n    }\n","date":"2018-07-16 16:30:07","endLine":122,"groupId":"33656","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"createSearchHits","params":"(List<RatedDocument>rated@Integer[]relevanceRatings)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/e2/be8696e66f1807769cd72b06602106f17a90b0.src","preCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new Index(\"index\", \"uuid\"), 0, null));\n        }\n        return hits;\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/ExpectedReciprocalRankTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":112,"status":"B"}],"commitId":"5d3a53843a21098de3d1a342482db555eb660976","commitMessage":"@@@Merge branch 'master' into index-lifecycle\n","date":"2018-07-16 16:30:07","modifiedFileCount":"183","status":"M","submitter":"Colin Goodheart-Smithe"},{"authorTime":"2018-07-16 16:30:07","codes":[{"authorDate":"2018-07-24 20:13:52","commitOrder":3,"curCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new Index(\"index\", \"uuid\"), 0, null));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n    }\n","date":"2018-07-24 20:13:52","endLine":98,"groupId":"61564","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testDCGAt","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/46/8a1ac2e5721ad08cc0c5ef179b9c73f66c513e.src","preCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new Index(\"index\", \"uuid\"), 0, null));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).getQualityLevel(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).getQualityLevel(), DELTA);\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/DiscountedCumulativeGainTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":69,"status":"M"},{"authorDate":"2018-07-16 16:30:07","commitOrder":3,"curCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new Index(\"index\", \"uuid\"), 0, null));\n        }\n        return hits;\n    }\n","date":"2018-07-16 16:30:07","endLine":122,"groupId":"33656","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"createSearchHits","params":"(List<RatedDocument>rated@Integer[]relevanceRatings)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/e2/be8696e66f1807769cd72b06602106f17a90b0.src","preCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new Index(\"index\", \"uuid\"), 0, null));\n        }\n        return hits;\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/ExpectedReciprocalRankTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":112,"status":"N"}],"commitId":"a2abc8659595bc51e46550bf32b3c78ca071d664","commitMessage":"@@@Merge branch 'master' into index-lifecycle\n","date":"2018-07-24 20:13:52","modifiedFileCount":"55","status":"M","submitter":"Colin Goodheart-Smithe"},{"authorTime":"2019-01-29 21:58:11","codes":[{"authorDate":"2019-01-29 21:58:11","commitOrder":4,"curCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n    }\n","date":"2019-01-29 21:58:11","endLine":99,"groupId":"20584","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testDCGAt","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/0e/2d2b482e0b4b1b202205a604f03defadeb9c4c.src","preCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new Index(\"index\", \"uuid\"), 0, null));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/DiscountedCumulativeGainTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":70,"status":"M"},{"authorDate":"2019-01-29 21:58:11","commitOrder":4,"curCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        return hits;\n    }\n","date":"2019-01-29 21:58:11","endLine":123,"groupId":"33656","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"createSearchHits","params":"(List<RatedDocument>rated@Integer[]relevanceRatings)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/39/06b05ce9d60707ce5e667a578c5423ec879a3d.src","preCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new Index(\"index\", \"uuid\"), 0, null));\n        }\n        return hits;\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/ExpectedReciprocalRankTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":113,"status":"M"}],"commitId":"2325fb9cb3530607475233e7c7281e5ff7241001","commitMessage":"@@@Remove test only SearchShardTarget constructor (#37912)\n\nRemove SearchShardTarget test only constructor and replace all the usages with calls to the other constructor that accepts a ShardId.","date":"2019-01-29 21:58:11","modifiedFileCount":"21","status":"M","submitter":"Luca Cavanna"},{"authorTime":"2019-02-11 12:45:14","codes":[{"authorDate":"2019-02-11 12:45:14","commitOrder":5,"curCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(MapperService.SINGLE_MAPPING_NAME), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n    }\n","date":"2019-02-11 12:45:14","endLine":100,"groupId":"20584","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testDCGAt","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/30/c4f037b2a5953212614cd73c7e307046a30f16.src","preCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/DiscountedCumulativeGainTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":71,"status":"M"},{"authorDate":"2019-02-11 12:45:14","commitOrder":5,"curCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(MapperService.SINGLE_MAPPING_NAME), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        return hits;\n    }\n","date":"2019-02-11 12:45:14","endLine":124,"groupId":"33656","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"createSearchHits","params":"(List<RatedDocument>rated@Integer[]relevanceRatings)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/7a/3b9e3061a26d4953911f1c960af77262036329.src","preCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(\"type\"), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        return hits;\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/ExpectedReciprocalRankTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":114,"status":"M"}],"commitId":"a10e4deee1aa497afbabb5daa054ccc2b44191d3","commitMessage":"@@@Use only default type in rank_eval API (#38530)\n\nCurrently tests still use custom type names. In preparation for the final types\nremoval this change moves all of them to use the default \"_doc\" type in tests.","date":"2019-02-11 12:45:14","modifiedFileCount":"6","status":"M","submitter":"Christoph B?scher"},{"authorTime":"2019-09-24 02:14:54","codes":[{"authorDate":"2019-09-24 02:14:54","commitOrder":6,"curCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n    }\n","date":"2019-09-24 02:14:54","endLine":98,"groupId":"61564","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"testDCGAt","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ae/c3abbaf2046e95f500449afed16353c51fc80c.src","preCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(MapperService.SINGLE_MAPPING_NAME), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/DiscountedCumulativeGainTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":69,"status":"M"},{"authorDate":"2019-09-24 02:14:54","commitOrder":6,"curCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        return hits;\n    }\n","date":"2019-09-24 02:14:54","endLine":122,"groupId":"33656","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"createSearchHits","params":"(List<RatedDocument>rated@Integer[]relevanceRatings)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/4d/42074dca5a1b78c4327e3c8c863906fb7b20f8.src","preCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), new Text(MapperService.SINGLE_MAPPING_NAME), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        return hits;\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/ExpectedReciprocalRankTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":112,"status":"M"}],"commitId":"c1f99e2d75b8aa6a5e146971e6db876065436902","commitMessage":"@@@Remove `_type` from SearchHit (#46942)\n\nThis commit removes the `_type` field from all search hit responses.\n\nRelates to #41059 ","date":"2019-09-24 02:14:54","modifiedFileCount":"57","status":"M","submitter":"Alan Woodward"},{"authorTime":"2020-03-30 21:29:47","codes":[{"authorDate":"2020-03-30 21:29:47","commitOrder":7,"curCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), Collections.emptyMap(), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n    }\n","date":"2020-03-30 21:29:47","endLine":98,"groupId":"10320","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"testDCGAt","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/08/edec1eb4bb736ec33cf8b5d3b9bcb5a07176ad.src","preCode":"    public void testDCGAt() {\n        List<RatedDocument> rated = new ArrayList<>();\n        int[] relevanceRatings = new int[] { 3, 2, 3, 0, 1, 2 };\n        SearchHit[] hits = new SearchHit[6];\n        for (int i = 0; i < 6; i++) {\n            rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            hits[i] = new SearchHit(i, Integer.toString(i), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        DiscountedCumulativeGain dcg = new DiscountedCumulativeGain();\n        assertEquals(EXPECTED_DCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n\n        \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n        dcg = new DiscountedCumulativeGain(true, null, 10);\n        assertEquals(EXPECTED_NDCG, dcg.evaluate(\"id\", hits, rated).metricScore(), DELTA);\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/DiscountedCumulativeGainTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":69,"status":"M"},{"authorDate":"2020-03-30 21:29:47","commitOrder":7,"curCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), Collections.emptyMap(), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        return hits;\n    }\n","date":"2020-03-30 21:29:47","endLine":122,"groupId":"10320","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"createSearchHits","params":"(List<RatedDocument>rated@Integer[]relevanceRatings)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/1f/37bef07479924c7941fd6525d877c5857754fc.src","preCode":"    private SearchHit[] createSearchHits(List<RatedDocument> rated, Integer[] relevanceRatings) {\n        SearchHit[] hits = new SearchHit[relevanceRatings.length];\n        for (int i = 0; i < relevanceRatings.length; i++) {\n            if (relevanceRatings[i] != null) {\n                rated.add(new RatedDocument(\"index\", Integer.toString(i), relevanceRatings[i]));\n            }\n            hits[i] = new SearchHit(i, Integer.toString(i), Collections.emptyMap());\n            hits[i].shard(new SearchShardTarget(\"testnode\", new ShardId(\"index\", \"uuid\", 0), null, OriginalIndices.NONE));\n        }\n        return hits;\n    }\n","realPath":"modules/rank-eval/src/test/java/org/elasticsearch/index/rankeval/ExpectedReciprocalRankTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":112,"status":"M"}],"commitId":"128bcc59d802b2e1a6062edb09a302d5e79ab9f6","commitMessage":"@@@Search hit refactoring (#41656)\n\nRefactor SearchHit to have separate document and meta fields.\nThis is a part of bigger refactoring of issue #24422 to remove\ndependency on MapperService to check if a field is metafield.\n\nRelates to PR: #38373\nRelates to issue #24422","date":"2020-03-30 21:29:47","modifiedFileCount":"34","status":"M","submitter":"sandmannn"}]
