[{"authorTime":"2018-04-26 03:22:53","codes":[{"authorDate":"2018-04-26 03:22:53","commitOrder":1,"curCode":"    public void testNestedRewrites() throws IOException {\n        GeoDistanceSortBuilder sortBuilder = new GeoDistanceSortBuilder(\"fieldName\", 0.0, 0.0);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedPath(\"path\").setNestedFilter(rangeQuery);\n        GeoDistanceSortBuilder rewritten = (GeoDistanceSortBuilder) sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedFilter());\n    }\n","date":"2018-04-26 03:22:53","endLine":605,"groupId":"1221","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"testNestedRewrites","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/11/09bdfc1f1a108634f94e2f03ba5006b1d36445.src","preCode":"    public void testNestedRewrites() throws IOException {\n        GeoDistanceSortBuilder sortBuilder = new GeoDistanceSortBuilder(\"fieldName\", 0.0, 0.0);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedPath(\"path\").setNestedFilter(rangeQuery);\n        GeoDistanceSortBuilder rewritten = (GeoDistanceSortBuilder) sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedFilter());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/sort/GeoDistanceSortBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":593,"status":"B"},{"authorDate":"2018-04-26 03:22:53","commitOrder":1,"curCode":"    public void testNestedRewrites() throws IOException {\n        ScriptSortBuilder sortBuilder = new ScriptSortBuilder(mockScript(\"something\"), ScriptSortType.STRING);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedPath(\"path\").setNestedFilter(rangeQuery);\n        ScriptSortBuilder rewritten = (ScriptSortBuilder) sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedFilter());\n    }\n","date":"2018-04-26 03:22:53","endLine":380,"groupId":"1221","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"testNestedRewrites","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/ed/83011c26609e5fddf0acad50cfff4aead3c2e8.src","preCode":"    public void testNestedRewrites() throws IOException {\n        ScriptSortBuilder sortBuilder = new ScriptSortBuilder(mockScript(\"something\"), ScriptSortType.STRING);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedPath(\"path\").setNestedFilter(rangeQuery);\n        ScriptSortBuilder rewritten = (ScriptSortBuilder) sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedFilter());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/sort/ScriptSortBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":368,"status":"B"}],"commitId":"d74fb9eb4559077e2d20b19a9ed62d9ff825027a","commitMessage":"@@@Opened x-pack ILM code\n","date":"2018-04-26 03:22:53","modifiedFileCount":"0","status":"B","submitter":"Tal Levy"},{"authorTime":"2018-06-05 10:59:49","codes":[{"authorDate":"2018-04-26 03:22:53","commitOrder":2,"curCode":"    public void testNestedRewrites() throws IOException {\n        GeoDistanceSortBuilder sortBuilder = new GeoDistanceSortBuilder(\"fieldName\", 0.0, 0.0);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedPath(\"path\").setNestedFilter(rangeQuery);\n        GeoDistanceSortBuilder rewritten = (GeoDistanceSortBuilder) sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedFilter());\n    }\n","date":"2018-04-26 03:22:53","endLine":605,"groupId":"1221","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"testNestedRewrites","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/11/09bdfc1f1a108634f94e2f03ba5006b1d36445.src","preCode":"    public void testNestedRewrites() throws IOException {\n        GeoDistanceSortBuilder sortBuilder = new GeoDistanceSortBuilder(\"fieldName\", 0.0, 0.0);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedPath(\"path\").setNestedFilter(rangeQuery);\n        GeoDistanceSortBuilder rewritten = (GeoDistanceSortBuilder) sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedFilter());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/sort/GeoDistanceSortBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":593,"status":"N"},{"authorDate":"2018-06-05 10:59:49","commitOrder":2,"curCode":"    public void testNestedRewrites() throws IOException {\n        ScriptSortBuilder sortBuilder = new ScriptSortBuilder(mockScript(\"something\"), ScriptSortType.STRING);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedPath(\"path\").setNestedFilter(rangeQuery);\n        ScriptSortBuilder rewritten = sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedFilter());\n    }\n","date":"2018-06-05 10:59:49","endLine":379,"groupId":"1221","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"testNestedRewrites","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/9a/030cc3aabcbdc18c5796318ec48e0cbf8397d0.src","preCode":"    public void testNestedRewrites() throws IOException {\n        ScriptSortBuilder sortBuilder = new ScriptSortBuilder(mockScript(\"something\"), ScriptSortType.STRING);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedPath(\"path\").setNestedFilter(rangeQuery);\n        ScriptSortBuilder rewritten = (ScriptSortBuilder) sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedFilter());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/sort/ScriptSortBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":367,"status":"M"}],"commitId":"2820dba2d7cbbd39e32df7216bbb00a15a0784ad","commitMessage":"@@@Merge branch 'master' into index-lifecycle\n","date":"2018-06-05 10:59:49","modifiedFileCount":"48","status":"M","submitter":"Tal Levy"},{"authorTime":"2019-06-27 23:30:02","codes":[{"authorDate":"2019-06-27 23:30:02","commitOrder":3,"curCode":"    public void testNestedRewrites() throws IOException {\n        GeoDistanceSortBuilder sortBuilder = new GeoDistanceSortBuilder(\"fieldName\", 0.0, 0.0);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedSort(\n            new NestedSortBuilder(\"path\")\n                .setFilter(rangeQuery)\n        );\n        GeoDistanceSortBuilder rewritten = sortBuilder.rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedSort().getFilter());\n    }\n","date":"2019-06-27 23:30:02","endLine":561,"groupId":"6005","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"testNestedRewrites","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/73/be5837faa90654cf82aa008206950f5e7bbb95.src","preCode":"    public void testNestedRewrites() throws IOException {\n        GeoDistanceSortBuilder sortBuilder = new GeoDistanceSortBuilder(\"fieldName\", 0.0, 0.0);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedPath(\"path\").setNestedFilter(rangeQuery);\n        GeoDistanceSortBuilder rewritten = (GeoDistanceSortBuilder) sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedFilter());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/sort/GeoDistanceSortBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":547,"status":"M"},{"authorDate":"2019-06-27 23:30:02","commitOrder":3,"curCode":"    public void testNestedRewrites() throws IOException {\n        ScriptSortBuilder sortBuilder = new ScriptSortBuilder(mockScript(\"something\"), ScriptSortType.STRING);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedSort(new NestedSortBuilder(\"path\").setFilter(rangeQuery));\n        ScriptSortBuilder rewritten = sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedSort().getFilter());\n    }\n","date":"2019-06-27 23:30:02","endLine":362,"groupId":"6005","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"testNestedRewrites","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/1d/3b71bbf40dbd2c4c6775099ade86b61fe7b73d.src","preCode":"    public void testNestedRewrites() throws IOException {\n        ScriptSortBuilder sortBuilder = new ScriptSortBuilder(mockScript(\"something\"), ScriptSortType.STRING);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedPath(\"path\").setNestedFilter(rangeQuery);\n        ScriptSortBuilder rewritten = sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedFilter());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/sort/ScriptSortBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":350,"status":"M"}],"commitId":"a6144158384876d259e59986af7c2fd14b67f6cc","commitMessage":"@@@Remove deprecated sort options: nested_path and nested_filter (#42809)\n\nThis commit removes the nested_path and nested_filter options deprecated in 6x.\nThis change also checks that the sort field has a [nested] option if it is under a nested\nobject and throws an exception if it's not the case.\n\nCloses #27098","date":"2019-06-27 23:30:02","modifiedFileCount":"13","status":"M","submitter":"Jim Ferenczi"},{"authorTime":"2021-01-15 01:11:59","codes":[{"authorDate":"2021-01-15 01:11:59","commitOrder":4,"curCode":"    public void testNestedRewrites() throws IOException {\n        GeoDistanceSortBuilder sortBuilder = new GeoDistanceSortBuilder(\"fieldName\", 0.0, 0.0);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryRewriteContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedSort(\n            new NestedSortBuilder(\"path\")\n                .setFilter(rangeQuery)\n        );\n        GeoDistanceSortBuilder rewritten = sortBuilder.rewrite(createMockSearchExecutionContext());\n        assertNotSame(rangeQuery, rewritten.getNestedSort().getFilter());\n    }\n","date":"2021-01-15 01:11:59","endLine":561,"groupId":"104524","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"testNestedRewrites","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/c0/335e5dcef5ae2edb57461f44a5156cb4eff554.src","preCode":"    public void testNestedRewrites() throws IOException {\n        GeoDistanceSortBuilder sortBuilder = new GeoDistanceSortBuilder(\"fieldName\", 0.0, 0.0);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedSort(\n            new NestedSortBuilder(\"path\")\n                .setFilter(rangeQuery)\n        );\n        GeoDistanceSortBuilder rewritten = sortBuilder.rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedSort().getFilter());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/sort/GeoDistanceSortBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":547,"status":"M"},{"authorDate":"2021-01-15 01:11:59","commitOrder":4,"curCode":"    public void testNestedRewrites() throws IOException {\n        ScriptSortBuilder sortBuilder = new ScriptSortBuilder(mockScript(\"something\"), ScriptSortType.STRING);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryRewriteContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedSort(new NestedSortBuilder(\"path\").setFilter(rangeQuery));\n        ScriptSortBuilder rewritten = sortBuilder\n                .rewrite(createMockSearchExecutionContext());\n        assertNotSame(rangeQuery, rewritten.getNestedSort().getFilter());\n    }\n","date":"2021-01-15 01:11:59","endLine":363,"groupId":"104524","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"testNestedRewrites","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-elasticsearch-10-0.7/blobInfo/CC_OUT/blobs/b8/fb8ba6a42b69c77bc4e299deb6359eebf411a5.src","preCode":"    public void testNestedRewrites() throws IOException {\n        ScriptSortBuilder sortBuilder = new ScriptSortBuilder(mockScript(\"something\"), ScriptSortType.STRING);\n        RangeQueryBuilder rangeQuery = new RangeQueryBuilder(\"fieldName\") {\n            @Override\n            public QueryBuilder doRewrite(QueryRewriteContext queryShardContext) throws IOException {\n                return new MatchNoneQueryBuilder();\n            }\n        };\n        sortBuilder.setNestedSort(new NestedSortBuilder(\"path\").setFilter(rangeQuery));\n        ScriptSortBuilder rewritten = sortBuilder\n                .rewrite(createMockShardContext());\n        assertNotSame(rangeQuery, rewritten.getNestedSort().getFilter());\n    }\n","realPath":"server/src/test/java/org/elasticsearch/search/sort/ScriptSortBuilderTests.java","repoName":"elasticsearch","snippetEndLine":0,"snippetStartLine":0,"startLine":351,"status":"M"}],"commitId":"5852fbedf52c77b0a76c2c731fdd4982fb65cd87","commitMessage":"@@@Rename QueryShardContext -> SearchExecutionContext. (#67490)\n\nWe decided to rename `QueryShardContext` to clarify that it supports all parts\nof search request execution. Before there was confusion over whether it should\nonly be used for building queries.  or maybe only used in the query phase. This\nPR also updates the javadocs.\n\nCloses #64740.","date":"2021-01-15 01:11:59","modifiedFileCount":"357","status":"M","submitter":"Julie Tibshirani"}]
