[{"authorTime":"2021-06-04 22:49:49","codes":[{"authorDate":"2021-06-04 22:49:49","commitOrder":1,"curCode":"    public void assertValidateInsertSelectWithoutKeyGenerateColumn() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = new InsertStatementContext(\n                new ShardingSphereSchema(Collections.emptyMap()), Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(createSingleTablesContext().getTables());\n        new ShardingInsertStatementValidator().preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","date":"2021-06-04 22:49:49","endLine":95,"groupId":"1811","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"assertValidateInsertSelectWithoutKeyGenerateColumn","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/2d/fa071418b0ae538185c82b9cd130d3b8512e57.src","preCode":"    public void assertValidateInsertSelectWithoutKeyGenerateColumn() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = new InsertStatementContext(\n                new ShardingSphereSchema(Collections.emptyMap()), Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(createSingleTablesContext().getTables());\n        new ShardingInsertStatementValidator().preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","realPath":"shardingsphere-features/shardingsphere-sharding/shardingsphere-sharding-core/src/test/java/org/apache/shardingsphere/sharding/route/engine/validator/dml/ShardingInsertStatementValidatorTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":88,"status":"B"},{"authorDate":"2021-06-04 22:49:49","commitOrder":1,"curCode":"    public void assertValidateInsertSelectWithoutBindingTables() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(true);\n        TablesContext multiTablesContext = createMultiTablesContext();\n        when(shardingRule.isAllBindingTables(multiTablesContext.getTableNames())).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = new InsertStatementContext(\n                new ShardingSphereSchema(Collections.emptyMap()), Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(multiTablesContext.getTables());\n        new ShardingInsertStatementValidator().preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","date":"2021-06-04 22:49:49","endLine":117,"groupId":"13515","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"assertValidateInsertSelectWithoutBindingTables","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/2d/fa071418b0ae538185c82b9cd130d3b8512e57.src","preCode":"    public void assertValidateInsertSelectWithoutBindingTables() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(true);\n        TablesContext multiTablesContext = createMultiTablesContext();\n        when(shardingRule.isAllBindingTables(multiTablesContext.getTableNames())).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = new InsertStatementContext(\n                new ShardingSphereSchema(Collections.emptyMap()), Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(multiTablesContext.getTables());\n        new ShardingInsertStatementValidator().preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","realPath":"shardingsphere-features/shardingsphere-sharding/shardingsphere-sharding-core/src/test/java/org/apache/shardingsphere/sharding/route/engine/validator/dml/ShardingInsertStatementValidatorTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":108,"status":"B"}],"commitId":"6b157b44d0336e4d9c61f940b0ec19c26758af84","commitMessage":"@@@Merge sharding feature to core module (#10662)\n\n* Merge dependencies\n\n* Merge sharding feature to api module\n\n* Merge sharding feature to core module","date":"2021-06-04 22:49:49","modifiedFileCount":"0","status":"B","submitter":"Liang Zhang"},{"authorTime":"2021-07-02 20:44:49","codes":[{"authorDate":"2021-07-02 20:44:49","commitOrder":2,"curCode":"    public void assertValidateInsertSelectWithoutKeyGenerateColumn() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = createInsertStatementContext(Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(createSingleTablesContext().getTables());\n        new ShardingInsertStatementValidator().preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","date":"2021-07-02 20:44:49","endLine":103,"groupId":"1811","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"assertValidateInsertSelectWithoutKeyGenerateColumn","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/fe/ff6d0a0ddfe4aedefe77ac2c87cdc85dcfed4d.src","preCode":"    public void assertValidateInsertSelectWithoutKeyGenerateColumn() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = new InsertStatementContext(\n                new ShardingSphereSchema(Collections.emptyMap()), Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(createSingleTablesContext().getTables());\n        new ShardingInsertStatementValidator().preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","realPath":"shardingsphere-features/shardingsphere-sharding/shardingsphere-sharding-core/src/test/java/org/apache/shardingsphere/sharding/route/engine/validator/dml/ShardingInsertStatementValidatorTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":97,"status":"M"},{"authorDate":"2021-07-02 20:44:49","commitOrder":2,"curCode":"    public void assertValidateInsertSelectWithoutBindingTables() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(true);\n        TablesContext multiTablesContext = createMultiTablesContext();\n        when(shardingRule.isAllBindingTables(multiTablesContext.getTableNames())).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = createInsertStatementContext(Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(multiTablesContext.getTables());\n        new ShardingInsertStatementValidator().preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","date":"2021-07-02 20:44:49","endLine":123,"groupId":"13515","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"assertValidateInsertSelectWithoutBindingTables","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/fe/ff6d0a0ddfe4aedefe77ac2c87cdc85dcfed4d.src","preCode":"    public void assertValidateInsertSelectWithoutBindingTables() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(true);\n        TablesContext multiTablesContext = createMultiTablesContext();\n        when(shardingRule.isAllBindingTables(multiTablesContext.getTableNames())).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = new InsertStatementContext(\n                new ShardingSphereSchema(Collections.emptyMap()), Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(multiTablesContext.getTables());\n        new ShardingInsertStatementValidator().preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","realPath":"shardingsphere-features/shardingsphere-sharding/shardingsphere-sharding-core/src/test/java/org/apache/shardingsphere/sharding/route/engine/validator/dml/ShardingInsertStatementValidatorTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":115,"status":"M"}],"commitId":"bfb784c9a0e47fd147c8a654c2f0b2a1e86c2c27","commitMessage":"@@@extract SchemaAvailable interface & add validate for SelectStatement (#11091)\n\n* refactor SchemaAvailable interface & add validate for SelectStatement\n\n* add final for InsertStatementContext field\n\n* fix test case error\n\n* fix rewrite test case error\n\n* refactor context new instance method\n\n* optimize test case\n\n* fix test case\n\n* optimize logic\n\n* fix test case\n\n* fix checkstyle","date":"2021-07-02 20:44:49","modifiedFileCount":"44","status":"M","submitter":"Zhengqiang Duan"},{"authorTime":"2021-08-16 18:35:28","codes":[{"authorDate":"2021-08-16 18:35:28","commitOrder":3,"curCode":"    public void assertValidateInsertSelectWithoutKeyGenerateColumn() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = createInsertStatementContext(Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(createSingleTablesContext().getTables());\n        new ShardingInsertStatementValidator(shardingConditions).preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","date":"2021-08-16 18:35:28","endLine":109,"groupId":"1811","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"assertValidateInsertSelectWithoutKeyGenerateColumn","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/62/880ce2fde13f428dc5e9f608f7cd13ea8faa27.src","preCode":"    public void assertValidateInsertSelectWithoutKeyGenerateColumn() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = createInsertStatementContext(Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(createSingleTablesContext().getTables());\n        new ShardingInsertStatementValidator().preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","realPath":"shardingsphere-features/shardingsphere-sharding/shardingsphere-sharding-core/src/test/java/org/apache/shardingsphere/sharding/route/engine/validator/dml/ShardingInsertStatementValidatorTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":103,"status":"M"},{"authorDate":"2021-08-16 18:35:28","commitOrder":3,"curCode":"    public void assertValidateInsertSelectWithoutBindingTables() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(true);\n        TablesContext multiTablesContext = createMultiTablesContext();\n        when(shardingRule.isAllBindingTables(multiTablesContext.getTableNames())).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = createInsertStatementContext(Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(multiTablesContext.getTables());\n        new ShardingInsertStatementValidator(shardingConditions).preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","date":"2021-08-16 18:35:28","endLine":129,"groupId":"13515","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"assertValidateInsertSelectWithoutBindingTables","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/62/880ce2fde13f428dc5e9f608f7cd13ea8faa27.src","preCode":"    public void assertValidateInsertSelectWithoutBindingTables() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(true);\n        TablesContext multiTablesContext = createMultiTablesContext();\n        when(shardingRule.isAllBindingTables(multiTablesContext.getTableNames())).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = createInsertStatementContext(Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(multiTablesContext.getTables());\n        new ShardingInsertStatementValidator().preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","realPath":"shardingsphere-features/shardingsphere-sharding/shardingsphere-sharding-core/src/test/java/org/apache/shardingsphere/sharding/route/engine/validator/dml/ShardingInsertStatementValidatorTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":121,"status":"M"}],"commitId":"618115e290001a48aabff2b02c4feb61b16fd0d0","commitMessage":"@@@Reduce the creation of sharding conditions (#11841)\n\n* Reduce the creation of sharding conditions\n\n* optimize code\n\n* optimize code\n\n* fix checkstyle\n\n* optimize code","date":"2021-08-16 18:35:28","modifiedFileCount":"9","status":"M","submitter":"Zhengqiang Duan"},{"authorTime":"2021-08-23 16:05:44","codes":[{"authorDate":"2021-08-23 16:05:44","commitOrder":4,"curCode":"    public void assertValidateInsertSelectWithoutKeyGenerateColumn() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = createInsertStatementContext(Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getUniqueTables().putAll(createSingleTablesContext().getUniqueTables());\n        new ShardingInsertStatementValidator(shardingConditions).preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","date":"2021-08-23 16:05:44","endLine":109,"groupId":"10511","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"assertValidateInsertSelectWithoutKeyGenerateColumn","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/86/604ee4f314243c647edc4ee4acd8e6c3940e0c.src","preCode":"    public void assertValidateInsertSelectWithoutKeyGenerateColumn() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = createInsertStatementContext(Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(createSingleTablesContext().getTables());\n        new ShardingInsertStatementValidator(shardingConditions).preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","realPath":"shardingsphere-features/shardingsphere-sharding/shardingsphere-sharding-core/src/test/java/org/apache/shardingsphere/sharding/route/engine/validator/dml/ShardingInsertStatementValidatorTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":103,"status":"M"},{"authorDate":"2021-08-23 16:05:44","commitOrder":4,"curCode":"    public void assertValidateInsertSelectWithoutBindingTables() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(true);\n        TablesContext multiTablesContext = createMultiTablesContext();\n        when(shardingRule.isAllBindingTables(multiTablesContext.getTableNames())).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = createInsertStatementContext(Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getUniqueTables().putAll(multiTablesContext.getUniqueTables());\n        new ShardingInsertStatementValidator(shardingConditions).preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","date":"2021-08-23 16:05:44","endLine":129,"groupId":"10511","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"assertValidateInsertSelectWithoutBindingTables","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-shardingsphere-10-0.7/blobInfo/CC_OUT/blobs/86/604ee4f314243c647edc4ee4acd8e6c3940e0c.src","preCode":"    public void assertValidateInsertSelectWithoutBindingTables() {\n        when(shardingRule.findGenerateKeyColumnName(\"user\")).thenReturn(Optional.of(\"id\"));\n        when(shardingRule.isGenerateKeyColumn(\"id\", \"user\")).thenReturn(true);\n        TablesContext multiTablesContext = createMultiTablesContext();\n        when(shardingRule.isAllBindingTables(multiTablesContext.getTableNames())).thenReturn(false);\n        SQLStatementContext<InsertStatement> sqlStatementContext = createInsertStatementContext(Collections.singletonList(1), createInsertSelectStatement());\n        sqlStatementContext.getTablesContext().getTables().addAll(multiTablesContext.getTables());\n        new ShardingInsertStatementValidator(shardingConditions).preValidate(shardingRule, sqlStatementContext, Collections.emptyList(), mock(ShardingSphereSchema.class));\n    }\n","realPath":"shardingsphere-features/shardingsphere-sharding/shardingsphere-sharding-core/src/test/java/org/apache/shardingsphere/sharding/route/engine/validator/dml/ShardingInsertStatementValidatorTest.java","repoName":"shardingsphere","snippetEndLine":0,"snippetStartLine":0,"startLine":121,"status":"M"}],"commitId":"29b4fabfded8b6ca3e9df1dd8866c32393f2855d","commitMessage":"@@@optimize table context (#11949)\n\n","date":"2021-08-23 16:05:44","modifiedFileCount":"9","status":"M","submitter":"Zhengqiang Duan"}]
