[{"authorTime":"2021-03-21 11:18:50","codes":[{"authorDate":"2021-03-21 11:18:50","commitOrder":1,"curCode":"    public ProfileTreeNode getFragmentProfileTree(String queryID) throws AnalysisException {\n        ProfileTreeNode tree;\n        readLock.lock();\n        try {\n            ProfileElement element = profileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get fragment profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            return element.builder.getFragmentTreeRoot();\n        } finally {\n            readLock.unlock();\n        }\n    }\n","date":"2021-03-21 11:18:50","endLine":221,"groupId":"3078","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"getFragmentProfileTree","params":"(StringqueryID)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/f4/b4ca591bbf0c05739c5f62fbbb805f9d53affa.src","preCode":"    public ProfileTreeNode getFragmentProfileTree(String queryID) throws AnalysisException {\n        ProfileTreeNode tree;\n        readLock.lock();\n        try {\n            ProfileElement element = profileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get fragment profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            return element.builder.getFragmentTreeRoot();\n        } finally {\n            readLock.unlock();\n        }\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/common/util/ProfileManager.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":208,"status":"B"},{"authorDate":"2021-03-21 11:18:50","commitOrder":1,"curCode":"    public ProfileTreeNode getInstanceProfileTree(String queryID, String fragmentId, String instanceId) throws AnalysisException {\n        ProfileTreeBuilder builder;\n        readLock.lock();\n        try {\n            ProfileElement element = profileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get instance profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            builder = element.builder;\n        } finally {\n            readLock.unlock();\n        }\n\n        return builder.getInstanceTreeRoot(fragmentId, instanceId);\n    }\n","date":"2021-03-21 11:18:50","endLine":255,"groupId":"3078","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"getInstanceProfileTree","params":"(StringqueryID@StringfragmentId@StringinstanceId)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/f4/b4ca591bbf0c05739c5f62fbbb805f9d53affa.src","preCode":"    public ProfileTreeNode getInstanceProfileTree(String queryID, String fragmentId, String instanceId) throws AnalysisException {\n        ProfileTreeBuilder builder;\n        readLock.lock();\n        try {\n            ProfileElement element = profileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get instance profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            builder = element.builder;\n        } finally {\n            readLock.unlock();\n        }\n\n        return builder.getInstanceTreeRoot(fragmentId, instanceId);\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/common/util/ProfileManager.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":240,"status":"B"}],"commitId":"b9d92e0fcba1accc02b6e15553c4782ac0320f9c","commitMessage":"@@@[Profile] Visualize the query plan and query profile (#5475)\n\nAdd command:\n1. EXPLAIN GRAPGH SELECT ...\n2. SHOW QUERY PROFILE \"...\"\n\nDocument will be added in next PR\n\nChange-Id: Ifd9365e10b1f9ff4fdf8ae0556343783d97545f0","date":"2021-03-21 11:18:50","modifiedFileCount":"34","status":"B","submitter":"Mingyu Chen"},{"authorTime":"2021-05-13 22:33:26","codes":[{"authorDate":"2021-05-13 22:33:26","commitOrder":2,"curCode":"    public ProfileTreeNode getFragmentProfileTree(String queryID) throws AnalysisException {\n        ProfileTreeNode tree;\n        readLock.lock();\n        try {\n            ProfileElement element = queryIdToProfileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get fragment profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            return element.builder.getFragmentTreeRoot();\n        } finally {\n            readLock.unlock();\n        }\n    }\n","date":"2021-05-13 22:33:26","endLine":231,"groupId":"3078","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"getFragmentProfileTree","params":"(StringqueryID)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/44/8090e6f21a44e28cf9a720a23e5fcbaa165168.src","preCode":"    public ProfileTreeNode getFragmentProfileTree(String queryID) throws AnalysisException {\n        ProfileTreeNode tree;\n        readLock.lock();\n        try {\n            ProfileElement element = profileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get fragment profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            return element.builder.getFragmentTreeRoot();\n        } finally {\n            readLock.unlock();\n        }\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/common/util/ProfileManager.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":218,"status":"M"},{"authorDate":"2021-05-13 22:33:26","commitOrder":2,"curCode":"    public ProfileTreeNode getInstanceProfileTree(String queryID, String fragmentId, String instanceId) throws AnalysisException {\n        ProfileTreeBuilder builder;\n        readLock.lock();\n        try {\n            ProfileElement element = queryIdToProfileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get instance profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            builder = element.builder;\n        } finally {\n            readLock.unlock();\n        }\n\n        return builder.getInstanceTreeRoot(fragmentId, instanceId);\n    }\n","date":"2021-05-13 22:33:26","endLine":265,"groupId":"3078","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"getInstanceProfileTree","params":"(StringqueryID@StringfragmentId@StringinstanceId)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/44/8090e6f21a44e28cf9a720a23e5fcbaa165168.src","preCode":"    public ProfileTreeNode getInstanceProfileTree(String queryID, String fragmentId, String instanceId) throws AnalysisException {\n        ProfileTreeBuilder builder;\n        readLock.lock();\n        try {\n            ProfileElement element = profileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get instance profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            builder = element.builder;\n        } finally {\n            readLock.unlock();\n        }\n\n        return builder.getInstanceTreeRoot(fragmentId, instanceId);\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/common/util/ProfileManager.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":250,"status":"M"}],"commitId":"0c83e43a67f3a85f17b00d896b6998e29eb2a41f","commitMessage":"@@@[Optimize] Optimize profile lock conflict and view profile while query is executing (#5762)\n\n1. Reduce lock conflicts in RuntimeProfile of be;\n2. can view query profile when the query is executing;\n3. reduce wait time for 'show proc /current_queries'.","date":"2021-05-13 22:33:26","modifiedFileCount":"14","status":"M","submitter":"luozenglin"},{"authorTime":"2021-07-27 13:37:34","codes":[{"authorDate":"2021-07-27 13:37:34","commitOrder":3,"curCode":"    public ProfileTreeNode getFragmentProfileTree(String queryID, String executionId) throws AnalysisException {\n        MultiProfileTreeBuilder builder;\n        readLock.lock();\n        try {\n            ProfileElement element = queryIdToProfileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get fragment profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            builder = element.builder;\n        } finally {\n            readLock.unlock();\n        }\n        return builder.getFragmentTreeRoot(executionId);\n    }\n","date":"2021-07-27 13:37:34","endLine":225,"groupId":"101035","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"getFragmentProfileTree","params":"(StringqueryID@StringexecutionId)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/28/dd935a273c4048993783ac56462c6ae6227db2.src","preCode":"    public ProfileTreeNode getFragmentProfileTree(String queryID) throws AnalysisException {\n        ProfileTreeNode tree;\n        readLock.lock();\n        try {\n            ProfileElement element = queryIdToProfileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get fragment profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            return element.builder.getFragmentTreeRoot();\n        } finally {\n            readLock.unlock();\n        }\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/common/util/ProfileManager.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":211,"status":"M"},{"authorDate":"2021-07-27 13:37:34","commitOrder":3,"curCode":"    public ProfileTreeNode getInstanceProfileTree(String queryID, String executionId, String fragmentId, String instanceId)\n            throws AnalysisException {\n        MultiProfileTreeBuilder builder;\n        readLock.lock();\n        try {\n            ProfileElement element = queryIdToProfileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get instance profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            builder = element.builder;\n        } finally {\n            readLock.unlock();\n        }\n\n        return builder.getInstanceTreeRoot(executionId, fragmentId, instanceId);\n    }\n","date":"2021-07-27 13:37:34","endLine":261,"groupId":"101035","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"getInstanceProfileTree","params":"(StringqueryID@StringexecutionId@StringfragmentId@StringinstanceId)","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-incubatordoris-10-0.7/blobInfo/CC_OUT/blobs/28/dd935a273c4048993783ac56462c6ae6227db2.src","preCode":"    public ProfileTreeNode getInstanceProfileTree(String queryID, String fragmentId, String instanceId) throws AnalysisException {\n        ProfileTreeBuilder builder;\n        readLock.lock();\n        try {\n            ProfileElement element = queryIdToProfileMap.get(queryID);\n            if (element == null || element.builder == null) {\n                throw new AnalysisException(\"failed to get instance profile tree. err: \"\n                        + (element == null ? \"not found\" : element.errMsg));\n            }\n            builder = element.builder;\n        } finally {\n            readLock.unlock();\n        }\n\n        return builder.getInstanceTreeRoot(fragmentId, instanceId);\n    }\n","realPath":"fe/fe-core/src/main/java/org/apache/doris/common/util/ProfileManager.java","repoName":"incubatordoris","snippetEndLine":0,"snippetStartLine":0,"startLine":245,"status":"M"}],"commitId":"f26e3408b23314db4bf627a8df43795ae04271d4","commitMessage":"@@@[Profile] Support show load profile for broker load job (#6214)\n\n1.\nAdd new statement:\n`SHOW LOAD PROFILE \"xxx\";`\n\n2.\nImprove the read performance of orc scanner","date":"2021-07-27 13:37:34","modifiedFileCount":"10","status":"M","submitter":"Mingyu Chen"}]
