[{"authorTime":"2020-07-14 12:19:10","codes":[{"authorDate":"2020-07-14 12:19:10","commitOrder":1,"curCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> locations = Arrays.asList(\"testimport\");\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), eq(locations))).willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(\"testimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tArrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","date":"2020-07-23 12:02:32","endLine":120,"groupId":"2923","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"withProcessedImportsResolvesAndLoads","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/51/e4c10b8d27184c87144ec1e21558d4150649d7.src","preCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> locations = Arrays.asList(\"testimport\");\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), eq(locations))).willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(\"testimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tArrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":103,"status":"B"},{"authorDate":"2020-07-14 12:19:10","commitOrder":1,"curCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> initialLocations = Arrays.asList(\"initialimport\");\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"secondimport\");\n\t\tMap<ConfigDataLocation, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<String> secondLocations = Arrays.asList(\"secondimport\");\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new TestConfigDataLocation(\"b\"), new ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor\n\t\t\t\t.ofInitialImport(\"initialimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tArrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","date":"2020-07-23 12:02:32","endLine":197,"groupId":"13941","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"withProcessedImportsProvidesLocationResolverContextWithAccessToParent","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/51/e4c10b8d27184c87144ec1e21558d4150649d7.src","preCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> initialLocations = Arrays.asList(\"initialimport\");\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"secondimport\");\n\t\tMap<ConfigDataLocation, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<String> secondLocations = Arrays.asList(\"secondimport\");\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new TestConfigDataLocation(\"b\"), new ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor\n\t\t\t\t.ofInitialImport(\"initialimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tArrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":174,"status":"B"}],"commitId":"3352024b1ca641fa0beaaa4cd87788c190242eb0","commitMessage":"@@@Provide ConfigFileApplicationListener replacement\n\nDeprecate `ConfigFileApplicationListener` and provide a replacement\nmechanism that supports arbitrary config data imports.\n\nThis commit updates the following areas:\n\n- Extract `EnvironmentPostProcessor` invocation logic from the\n  `ConfigFileApplicationListener` to new dedicated listener. Also\n  providing support for `Log` injection.\n\n- Extract `RandomPropertySource` adding logic from the\n  `ConfigFileApplicationListener` to a dedicated class.\n\n- Migrate to the recently introduced `DefaultPropertiesPropertySource`\n  class when moving the defaultProperties `PropertySource`\n\n- Replace processing logic with a phased approach to ensure that\n  profile enablement happens in a distinct phase and that profiles\n  can no longer be activated on an ad-hoc basis.\n\n- Provide a more predictable and logical import order for processing\n  `application.properties` and `application.yml` files.\n\n- Add support for a `spring.config.import` property which can be used\n  to import additional config data. Also provide a pluggable API\n  allowing third-parties to resolve and load locations themselves.\n\n- Add `spring.config.activate.on-profile` support which replaces the\n  existing `spring.profiles` property.\n\n- Add `spring.config.activate.on-cloud-platform` support which allows\n  a config data document to be active only on a given cloud platform.\n\n- Support a `spring.config.use-legacy-processing` property allowing the\n  previous processing logic to be used.\n\nCloses gh-22497\n\nCo-authored-by: Madhura Bhave <mbhave@vmware.com>\n","date":"2020-07-23 12:02:32","modifiedFileCount":"17","status":"B","submitter":"Phillip Webb"},{"authorTime":"2020-08-21 08:26:01","codes":[{"authorDate":"2020-08-21 08:26:01","commitOrder":2,"curCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> locations = Arrays.asList(\"testimport\");\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(\"testimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapRegistry, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","date":"2020-08-21 12:49:03","endLine":129,"groupId":"2923","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"withProcessedImportsResolvesAndLoads","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/52/42572bf158ed16f03b782ff30b1cfaf5bd0590.src","preCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> locations = Arrays.asList(\"testimport\");\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), eq(locations))).willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(\"testimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tArrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":111,"status":"M"},{"authorDate":"2020-08-21 08:26:01","commitOrder":2,"curCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> initialLocations = Arrays.asList(\"initialimport\");\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"secondimport\");\n\t\tMap<ConfigDataLocation, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<String> secondLocations = Arrays.asList(\"secondimport\");\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new TestConfigDataLocation(\"b\"), new ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor\n\t\t\t\t.ofInitialImport(\"initialimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapRegistry, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","date":"2020-08-21 12:49:03","endLine":207,"groupId":"618","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"withProcessedImportsProvidesLocationResolverContextWithAccessToParent","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/52/42572bf158ed16f03b782ff30b1cfaf5bd0590.src","preCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> initialLocations = Arrays.asList(\"initialimport\");\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"secondimport\");\n\t\tMap<ConfigDataLocation, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<String> secondLocations = Arrays.asList(\"secondimport\");\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new TestConfigDataLocation(\"b\"), new ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor\n\t\t\t\t.ofInitialImport(\"initialimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tArrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":184,"status":"M"}],"commitId":"d123c924a0e1fbe6b4e8f27baf98b5bfd1a64a86","commitMessage":"@@@Add BootstrapRegisty support for config data\n\nExpose the `BootstrapRegisty` to both `ConfigDataLocationResolver` and\n`ConfigDataLoader` implementations. The registry is exposed via the\ncontext interfaces and may be used to reuse instances that are expensive\nto create. It may also be used to ultimately register beans with the\n`ApplicationContext`.\n\nCloses gh-22956\n","date":"2020-08-21 12:49:03","modifiedFileCount":"21","status":"M","submitter":"Phillip Webb"},{"authorTime":"2020-09-17 15:09:41","codes":[{"authorDate":"2020-09-17 15:09:41","commitOrder":3,"curCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> locations = Arrays.asList(\"testimport\");\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(\"testimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","date":"2020-09-17 15:31:00","endLine":130,"groupId":"2923","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"withProcessedImportsResolvesAndLoads","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/32/25b68ecc8bebd82d588ca305422b1c761a3af5.src","preCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> locations = Arrays.asList(\"testimport\");\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(\"testimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapRegistry, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":112,"status":"M"},{"authorDate":"2020-09-17 15:09:41","commitOrder":3,"curCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> initialLocations = Arrays.asList(\"initialimport\");\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"secondimport\");\n\t\tMap<ConfigDataLocation, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<String> secondLocations = Arrays.asList(\"secondimport\");\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new TestConfigDataLocation(\"b\"), new ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor\n\t\t\t\t.ofInitialImport(\"initialimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","date":"2020-09-17 15:31:00","endLine":208,"groupId":"618","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"withProcessedImportsProvidesLocationResolverContextWithAccessToParent","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/32/25b68ecc8bebd82d588ca305422b1c761a3af5.src","preCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> initialLocations = Arrays.asList(\"initialimport\");\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"secondimport\");\n\t\tMap<ConfigDataLocation, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<String> secondLocations = Arrays.asList(\"secondimport\");\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new TestConfigDataLocation(\"b\"), new ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor\n\t\t\t\t.ofInitialImport(\"initialimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapRegistry, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":185,"status":"M"}],"commitId":"1ae14362110360cc558bcd498fa67f70a35b8373","commitMessage":"@@@Refactor BootstrapRegistry support\n\nRefactor `BootstrapRegistry` support following initial prototype work\nwith the Spring Cloud team.\n\nThis update splits the `BootstrapRegistry` API into `BootstrapRegistry`. \n`BootstrapContext` and  `ConfigurableBootstrapContext` interfaces and\nmoves it to the same package as `SpringApplication`.\n\nA new `Bootstrapper` interface has been introduced that can be added\nto the `SpringApplication` to customize the `BootstrapRegistry` before\nit's used.\n\nCloses gh-23326\n","date":"2020-09-17 15:31:00","modifiedFileCount":"40","status":"M","submitter":"Phillip Webb"},{"authorTime":"2020-10-14 05:43:34","codes":[{"authorDate":"2020-10-14 05:43:34","commitOrder":4,"curCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> locations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataResource, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new TestConfigDataResource(\"a\"), new ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","date":"2020-10-16 02:33:57","endLine":133,"groupId":"2923","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"withProcessedImportsResolvesAndLoads","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/df/bc888a083825fdeeb20473fb6e17a4ac7cde20.src","preCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> locations = Arrays.asList(\"testimport\");\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(\"testimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":115,"status":"M"},{"authorDate":"2020-10-14 05:43:34","commitOrder":4,"curCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> initialLocations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"location2\");\n\t\tMap<ConfigDataResource, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new TestConfigDataResource(\"a\"), new ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<ConfigDataLocation> secondLocations = Arrays.asList(LOCATION_2);\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataResource, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new TestConfigDataResource(\"b\"), new ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","date":"2020-10-16 02:33:57","endLine":209,"groupId":"12353","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"withProcessedImportsProvidesLocationResolverContextWithAccessToParent","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/df/bc888a083825fdeeb20473fb6e17a4ac7cde20.src","preCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<String> initialLocations = Arrays.asList(\"initialimport\");\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"secondimport\");\n\t\tMap<ConfigDataLocation, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new TestConfigDataLocation(\"a\"), new ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<String> secondLocations = Arrays.asList(\"secondimport\");\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataLocation, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new TestConfigDataLocation(\"b\"), new ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor\n\t\t\t\t.ofInitialImport(\"initialimport\");\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":187,"status":"M"}],"commitId":"1cf9fc107e5ed29a44935688eaca2bf6fa85108b","commitMessage":"@@@Improve ConfigData processing code\n\nRefactor `ConfigData` processing code to make it less awkward to\nfollow.\n\nPrior to this commit the `ConfigDataLocationResolver` would take a\nString location and return a `ConfigDataLocation` instance. This was\na little confusing since sometimes we would refer to `location` as the\nString value.  and sometimes it would be the typed instance. We also\nhad nowhere sensible to put the `optional:` prefix logic and we needed\nto pass a `boolean` parameter to a number of methods. The recently\nintroduced `Orgin` support also didn't have a good home.\n\nTo solve this.  `ConfigDataLocation` has been renamed to\n`ConfigDataResource`. This frees up `ConfigDataLocation` to be used\nas a richer `location` type that holds the String value.  the `Orgin`\nand provides a home for the `optional:` logic.\n\nThis commit also cleans up a few other areas of the code.  including\nrenaming `ResourceConfigData...` to `StandardConfigData...`. It also\nintroduces a new exception hierarchy for `ConfigDataNotFoundExceptions`.\n\nCloses gh-23711\n","date":"2020-10-16 02:33:57","modifiedFileCount":"41","status":"M","submitter":"Phillip Webb"},{"authorTime":"2020-12-02 09:35:04","codes":[{"authorDate":"2020-12-02 09:35:04","commitOrder":5,"curCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> locations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\")),\n\t\t\t\tnew ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","date":"2020-12-02 13:33:59","endLine":134,"groupId":"2923","id":9,"instanceNumber":1,"isCurCommit":0,"methodName":"withProcessedImportsResolvesAndLoads","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/c6/c430ecda06f4a8a42a9bb0d290a066947432af.src","preCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> locations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataResource, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new TestConfigDataResource(\"a\"), new ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":115,"status":"M"},{"authorDate":"2020-12-02 09:35:04","commitOrder":5,"curCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> initialLocations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"location2\");\n\t\tMap<ConfigDataResolutionResult, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\")),\n\t\t\t\tnew ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<ConfigDataLocation> secondLocations = Arrays.asList(LOCATION_2);\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new ConfigDataResolutionResult(LOCATION_2, new TestConfigDataResource(\"b\")),\n\t\t\t\tnew ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","date":"2020-12-02 13:33:59","endLine":215,"groupId":"7760","id":10,"instanceNumber":2,"isCurCommit":0,"methodName":"withProcessedImportsProvidesLocationResolverContextWithAccessToParent","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/c6/c430ecda06f4a8a42a9bb0d290a066947432af.src","preCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> initialLocations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"location2\");\n\t\tMap<ConfigDataResource, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new TestConfigDataResource(\"a\"), new ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<ConfigDataLocation> secondLocations = Arrays.asList(LOCATION_2);\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataResource, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new TestConfigDataResource(\"b\"), new ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":191,"status":"M"}],"commitId":"3dc03ac2752a06e015fc8ae7a6eba483b2cc863e","commitMessage":"@@@Refine non-optional classpath location checking\n\nUpdate `StandardConfigDataLocationResolver` to no longer check if\ndirectories exist for classpath resources. Unfortunately checking for\nthe parent directory of a `ClassPathResource` isn't always possible\nwithout resorting something similar to the\n`PathMatchingResourcePatternResolver` which would add a lot of\ncomplexity to the resolver.\n\nIn order to ensure that non-optional locations are always resolved. \nthe `ConfigDataEnvironment` now checks that all imported locations\nhave been loaded.\n\nCloses gh-24143\n","date":"2020-12-02 13:33:59","modifiedFileCount":"9","status":"M","submitter":"Phillip Webb"},{"authorTime":"2021-01-13 03:49:15","codes":[{"authorDate":"2021-01-13 03:49:15","commitOrder":6,"curCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> locations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","date":"2021-01-13 03:49:15","endLine":134,"groupId":"2923","id":11,"instanceNumber":1,"isCurCommit":0,"methodName":"withProcessedImportsResolvesAndLoads","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/54/ca2020c003fc1900ed56dadcb04949a6912da9.src","preCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> locations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\")),\n\t\t\t\tnew ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":115,"status":"M"},{"authorDate":"2021-01-13 03:49:15","commitOrder":6,"curCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> initialLocations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"location2\");\n\t\tMap<ConfigDataResolutionResult, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<ConfigDataLocation> secondLocations = Arrays.asList(LOCATION_2);\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new ConfigDataResolutionResult(LOCATION_2, new TestConfigDataResource(\"b\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","date":"2021-01-13 03:49:15","endLine":215,"groupId":"2923","id":12,"instanceNumber":2,"isCurCommit":0,"methodName":"withProcessedImportsProvidesLocationResolverContextWithAccessToParent","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/54/ca2020c003fc1900ed56dadcb04949a6912da9.src","preCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> initialLocations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"location2\");\n\t\tMap<ConfigDataResolutionResult, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\")),\n\t\t\t\tnew ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<ConfigDataLocation> secondLocations = Arrays.asList(LOCATION_2);\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new ConfigDataResolutionResult(LOCATION_2, new TestConfigDataResource(\"b\")),\n\t\t\t\tnew ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":191,"status":"M"}],"commitId":"48e00fc7f4283f4a2b0277f1304386621d8bc5f0","commitMessage":"@@@Merge branch '2.4.x'\n\nCloses gh-24793\n","date":"2021-01-13 03:49:15","modifiedFileCount":"14","status":"M","submitter":"Phillip Webb"},{"authorTime":"2021-06-04 13:24:17","codes":[{"authorDate":"2021-06-04 13:24:17","commitOrder":7,"curCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> locations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations), anyBoolean()))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","date":"2021-06-04 13:24:17","endLine":137,"groupId":"2923","id":13,"instanceNumber":1,"isCurCommit":0,"methodName":"withProcessedImportsResolvesAndLoads","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/3c/08c41f59d01846290c1f05e4b34e794c9a58e6.src","preCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> locations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":118,"status":"M"},{"authorDate":"2021-06-04 13:24:17","commitOrder":7,"curCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> initialLocations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"location2\");\n\t\tMap<ConfigDataResolutionResult, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations),\n\t\t\t\tanyBoolean())).willReturn(initialImported);\n\t\tList<ConfigDataLocation> secondLocations = Arrays.asList(LOCATION_2);\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new ConfigDataResolutionResult(LOCATION_2, new TestConfigDataResource(\"b\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations), anyBoolean()))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations),\n\t\t\t\tanyBoolean());\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","date":"2021-06-04 13:24:17","endLine":219,"groupId":"15449","id":14,"instanceNumber":2,"isCurCommit":0,"methodName":"withProcessedImportsProvidesLocationResolverContextWithAccessToParent","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/3c/08c41f59d01846290c1f05e4b34e794c9a58e6.src","preCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> initialLocations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"location2\");\n\t\tMap<ConfigDataResolutionResult, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<ConfigDataLocation> secondLocations = Arrays.asList(LOCATION_2);\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new ConfigDataResolutionResult(LOCATION_2, new TestConfigDataResource(\"b\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":194,"status":"M"}],"commitId":"e73062aefa622781ee8bcb490f513c1fc8068d62","commitMessage":"@@@Merge branch '2.4.x'\n\nCloses gh-26755\n","date":"2021-06-04 13:24:17","modifiedFileCount":"8","status":"M","submitter":"Phillip Webb"},{"authorTime":"2021-06-22 09:37:43","codes":[{"authorDate":"2021-06-22 09:37:43","commitOrder":8,"curCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> locations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations)))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","date":"2021-06-22 09:37:43","endLine":136,"groupId":"101693","id":15,"instanceNumber":1,"isCurCommit":1,"methodName":"withProcessedImportsResolvesAndLoads","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/f0/280d7047247007c5a1aaa0958aa4d008051a9f.src","preCode":"\tvoid withProcessedImportsResolvesAndLoads() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> locations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource propertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> imported = new LinkedHashMap<>();\n\t\timported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(propertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(locations), anyBoolean()))\n\t\t\t\t.willReturn(imported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tConfigDataEnvironmentContributors withProcessedImports = contributors.withProcessedImports(this.importer,\n\t\t\t\tthis.activationContext);\n\t\tIterator<ConfigDataEnvironmentContributor> iterator = withProcessedImports.iterator();\n\t\tassertThat(iterator.next().getPropertySource()).isSameAs(propertySource);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.INITIAL_IMPORT);\n\t\tassertThat(iterator.next().getKind()).isEqualTo(Kind.ROOT);\n\t\tassertThat(iterator.hasNext()).isFalse();\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":117,"status":"M"},{"authorDate":"2021-06-22 09:37:43","commitOrder":8,"curCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> initialLocations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"location2\");\n\t\tMap<ConfigDataResolutionResult, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations)))\n\t\t\t\t.willReturn(initialImported);\n\t\tList<ConfigDataLocation> secondLocations = Arrays.asList(LOCATION_2);\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new ConfigDataResolutionResult(LOCATION_2, new TestConfigDataResource(\"b\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations)))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations));\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","date":"2021-06-22 09:37:43","endLine":217,"groupId":"101693","id":16,"instanceNumber":2,"isCurCommit":1,"methodName":"withProcessedImportsProvidesLocationResolverContextWithAccessToParent","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-springboot-10-0.7/blobInfo/CC_OUT/blobs/f0/280d7047247007c5a1aaa0958aa4d008051a9f.src","preCode":"\tvoid withProcessedImportsProvidesLocationResolverContextWithAccessToParent() {\n\t\tthis.importer = mock(ConfigDataImporter.class);\n\t\tList<ConfigDataLocation> initialLocations = Arrays.asList(LOCATION_1);\n\t\tMockPropertySource initialPropertySource = new MockPropertySource();\n\t\tinitialPropertySource.setProperty(\"spring.config.import\", \"location2\");\n\t\tMap<ConfigDataResolutionResult, ConfigData> initialImported = new LinkedHashMap<>();\n\t\tinitialImported.put(new ConfigDataResolutionResult(LOCATION_1, new TestConfigDataResource(\"a\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(initialPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(initialLocations),\n\t\t\t\tanyBoolean())).willReturn(initialImported);\n\t\tList<ConfigDataLocation> secondLocations = Arrays.asList(LOCATION_2);\n\t\tMockPropertySource secondPropertySource = new MockPropertySource();\n\t\tMap<ConfigDataResolutionResult, ConfigData> secondImported = new LinkedHashMap<>();\n\t\tsecondImported.put(new ConfigDataResolutionResult(LOCATION_2, new TestConfigDataResource(\"b\"), false),\n\t\t\t\tnew ConfigData(Arrays.asList(secondPropertySource)));\n\t\tgiven(this.importer.resolveAndLoad(eq(this.activationContext), any(), any(), eq(secondLocations), anyBoolean()))\n\t\t\t\t.willReturn(secondImported);\n\t\tConfigDataEnvironmentContributor contributor = ConfigDataEnvironmentContributor.ofInitialImport(LOCATION_1);\n\t\tConfigDataEnvironmentContributors contributors = new ConfigDataEnvironmentContributors(this.logFactory,\n\t\t\t\tthis.bootstrapContext, Arrays.asList(contributor));\n\t\tcontributors.withProcessedImports(this.importer, this.activationContext);\n\t\tverify(this.importer).resolveAndLoad(any(), this.locationResolverContext.capture(), any(), eq(secondLocations),\n\t\t\t\tanyBoolean());\n\t\tConfigDataLocationResolverContext context = this.locationResolverContext.getValue();\n\t\tassertThat(context.getParent()).hasToString(\"a\");\n\t}\n","realPath":"spring-boot-project/spring-boot/src/test/java/org/springframework/boot/context/config/ConfigDataEnvironmentContributorsTests.java","repoName":"springboot","snippetEndLine":0,"snippetStartLine":0,"startLine":193,"status":"M"}],"commitId":"86dc156162f544053ec5c8575881a3c24dc78084","commitMessage":"@@@Merge branch '2.5.x'\n\nCloses gh-27006\n","date":"2021-06-22 09:37:43","modifiedFileCount":"7","status":"M","submitter":"Phillip Webb"}]
