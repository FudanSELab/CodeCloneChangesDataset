[{"authorTime":"2019-01-31 07:57:56","codes":[{"authorDate":"2019-01-31 07:57:56","commitOrder":1,"curCode":"    public void shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore() {\n        initializeConsumer(1, 0, t1);\n\n        stateManager.initialize();\n        stateManager.register(new WrappedStateStore() {\n            @Override\n            public StateStore inner() {\n                return store1;\n            }\n\n            @Override\n            public StateStore wrappedStore() {\n                return store1;\n            }\n\n            @Override\n            public String name() {\n                return store1.name();\n            }\n\n            @Override\n            public void init(final ProcessorContext context, final StateStore root) {\n                store1.init(context, root);\n            }\n\n            @Override\n            public void flush() {\n                store1.flush();\n            }\n\n            @Override\n            public void close() {\n                store1.close();\n            }\n\n            @Override\n            public boolean persistent() {\n                return store1.persistent();\n            }\n\n            @Override\n            public boolean isOpen() {\n                return store1.isOpen();\n            }\n        }, stateRestoreCallback);\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(5, restoredRecord.value.length);\n    }\n","date":"2019-01-31 07:57:56","endLine":288,"groupId":"10074","id":1,"instanceNumber":1,"isCurCommit":0,"methodName":"shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/03/a431d1729b01a1aaf5176940bff1aca7aeaa53.src","preCode":"    public void shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore() {\n        initializeConsumer(1, 0, t1);\n\n        stateManager.initialize();\n        stateManager.register(new WrappedStateStore() {\n            @Override\n            public StateStore inner() {\n                return store1;\n            }\n\n            @Override\n            public StateStore wrappedStore() {\n                return store1;\n            }\n\n            @Override\n            public String name() {\n                return store1.name();\n            }\n\n            @Override\n            public void init(final ProcessorContext context, final StateStore root) {\n                store1.init(context, root);\n            }\n\n            @Override\n            public void flush() {\n                store1.flush();\n            }\n\n            @Override\n            public void close() {\n                store1.close();\n            }\n\n            @Override\n            public boolean persistent() {\n                return store1.persistent();\n            }\n\n            @Override\n            public boolean isOpen() {\n                return store1.isOpen();\n            }\n        }, stateRestoreCallback);\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(5, restoredRecord.value.length);\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/GlobalStateManagerImplTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":239,"status":"B"},{"authorDate":"2019-01-31 07:57:56","commitOrder":1,"curCode":"    public void shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore() {\n        initializeConsumer(1, 0, t2);\n\n        stateManager.initialize();\n        stateManager.register(new WrappedStateStore() {\n            @Override\n            public StateStore inner() {\n                return store2;\n            }\n\n            @Override\n            public StateStore wrappedStore() {\n                return store2;\n            }\n\n            @Override\n            public String name() {\n                return store2.name();\n            }\n\n            @Override\n            public void init(final ProcessorContext context, final StateStore root) {\n                store2.init(context, root);\n            }\n\n            @Override\n            public void flush() {\n                store2.flush();\n            }\n\n            @Override\n            public void close() {\n                store2.close();\n            }\n\n            @Override\n            public boolean persistent() {\n                return store2.persistent();\n            }\n\n            @Override\n            public boolean isOpen() {\n                return store2.isOpen();\n            }\n        }, stateRestoreCallback);\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(13, restoredRecord.value.length);\n    }\n","date":"2019-01-31 07:57:56","endLine":352,"groupId":"22390","id":2,"instanceNumber":2,"isCurCommit":0,"methodName":"shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/03/a431d1729b01a1aaf5176940bff1aca7aeaa53.src","preCode":"    public void shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore() {\n        initializeConsumer(1, 0, t2);\n\n        stateManager.initialize();\n        stateManager.register(new WrappedStateStore() {\n            @Override\n            public StateStore inner() {\n                return store2;\n            }\n\n            @Override\n            public StateStore wrappedStore() {\n                return store2;\n            }\n\n            @Override\n            public String name() {\n                return store2.name();\n            }\n\n            @Override\n            public void init(final ProcessorContext context, final StateStore root) {\n                store2.init(context, root);\n            }\n\n            @Override\n            public void flush() {\n                store2.flush();\n            }\n\n            @Override\n            public void close() {\n                store2.close();\n            }\n\n            @Override\n            public boolean persistent() {\n                return store2.persistent();\n            }\n\n            @Override\n            public boolean isOpen() {\n                return store2.isOpen();\n            }\n        }, stateRestoreCallback);\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(13, restoredRecord.value.length);\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/GlobalStateManagerImplTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":303,"status":"B"}],"commitId":"201022d19eac50a4bce8ccfa12c8e233f2b5cad6","commitMessage":"@@@KAFKA-3522: Replace RecordConverter with TimestampedBytesStore (#6204)\n\nReviewers: John Roesler <john@confluent.io>.  Bill Bejeck <bill@confluent.io>.  Guozhang Wang <guozhang@confluent.io>","date":"2019-01-31 07:57:56","modifiedFileCount":"9","status":"B","submitter":"Matthias J. Sax"},{"authorTime":"2019-02-15 00:38:01","codes":[{"authorDate":"2019-02-15 00:38:01","commitOrder":2,"curCode":"    public void shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore() {\n        initializeConsumer(1, 0, t1);\n\n        stateManager.initialize();\n        stateManager.register(\n            new WrappedStateStore<NoOpReadOnlyStore<Object, Object>>(store1) {\n            },\n            stateRestoreCallback\n        );\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(5, restoredRecord.value.length);\n    }\n","date":"2019-02-15 00:38:01","endLine":250,"groupId":"10074","id":3,"instanceNumber":1,"isCurCommit":0,"methodName":"shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/80/9a0b679d331134a0067320c0f3e6874f3d16e3.src","preCode":"    public void shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore() {\n        initializeConsumer(1, 0, t1);\n\n        stateManager.initialize();\n        stateManager.register(new WrappedStateStore() {\n            @Override\n            public StateStore inner() {\n                return store1;\n            }\n\n            @Override\n            public StateStore wrappedStore() {\n                return store1;\n            }\n\n            @Override\n            public String name() {\n                return store1.name();\n            }\n\n            @Override\n            public void init(final ProcessorContext context, final StateStore root) {\n                store1.init(context, root);\n            }\n\n            @Override\n            public void flush() {\n                store1.flush();\n            }\n\n            @Override\n            public void close() {\n                store1.close();\n            }\n\n            @Override\n            public boolean persistent() {\n                return store1.persistent();\n            }\n\n            @Override\n            public boolean isOpen() {\n                return store1.isOpen();\n            }\n        }, stateRestoreCallback);\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(5, restoredRecord.value.length);\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/GlobalStateManagerImplTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":237,"status":"M"},{"authorDate":"2019-02-15 00:38:01","commitOrder":2,"curCode":"    public void shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore() {\n        initializeConsumer(1, 0, t2);\n\n        stateManager.initialize();\n        stateManager.register(\n            new WrappedStateStore<NoOpReadOnlyStore<Object, Object>>(store2) {\n            },\n            stateRestoreCallback\n        );\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(13, restoredRecord.value.length);\n    }\n","date":"2019-02-15 00:38:01","endLine":278,"groupId":"15706","id":4,"instanceNumber":2,"isCurCommit":0,"methodName":"shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/80/9a0b679d331134a0067320c0f3e6874f3d16e3.src","preCode":"    public void shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore() {\n        initializeConsumer(1, 0, t2);\n\n        stateManager.initialize();\n        stateManager.register(new WrappedStateStore() {\n            @Override\n            public StateStore inner() {\n                return store2;\n            }\n\n            @Override\n            public StateStore wrappedStore() {\n                return store2;\n            }\n\n            @Override\n            public String name() {\n                return store2.name();\n            }\n\n            @Override\n            public void init(final ProcessorContext context, final StateStore root) {\n                store2.init(context, root);\n            }\n\n            @Override\n            public void flush() {\n                store2.flush();\n            }\n\n            @Override\n            public void close() {\n                store2.close();\n            }\n\n            @Override\n            public boolean persistent() {\n                return store2.persistent();\n            }\n\n            @Override\n            public boolean isOpen() {\n                return store2.isOpen();\n            }\n        }, stateRestoreCallback);\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(13, restoredRecord.value.length);\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/GlobalStateManagerImplTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":265,"status":"M"}],"commitId":"01f0f0af28ea05921868171c88448e299766e773","commitMessage":"@@@KAFKA-7916: Unify store wrapping code for clarity (#6255)\n\nRefactor internal store wrapping for improved maintainability.\n\nReviewers: Matthias J. Sax <matthias@confluent.io>.  Guozhang Wang <guozhang@confluent.io>","date":"2019-02-15 00:38:01","modifiedFileCount":"27","status":"M","submitter":"John Roesler"},{"authorTime":"2019-03-01 01:33:53","codes":[{"authorDate":"2019-03-01 01:33:53","commitOrder":3,"curCode":"    public void shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore() {\n        initializeConsumer(1, 0, t1);\n\n        stateManager.initialize();\n        stateManager.register(\n            new WrappedStateStore<NoOpReadOnlyStore<Object, Object>, Object, Object>(store1) {\n            },\n            stateRestoreCallback\n        );\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(5, restoredRecord.value.length);\n    }\n","date":"2019-03-01 01:33:53","endLine":250,"groupId":"10074","id":5,"instanceNumber":1,"isCurCommit":0,"methodName":"shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/c7/4ad1bb77cbfaaefef1d5e57a21c246373921f6.src","preCode":"    public void shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore() {\n        initializeConsumer(1, 0, t1);\n\n        stateManager.initialize();\n        stateManager.register(\n            new WrappedStateStore<NoOpReadOnlyStore<Object, Object>>(store1) {\n            },\n            stateRestoreCallback\n        );\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(5, restoredRecord.value.length);\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/GlobalStateManagerImplTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":237,"status":"M"},{"authorDate":"2019-03-01 01:33:53","commitOrder":3,"curCode":"    public void shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore() {\n        initializeConsumer(1, 0, t2);\n\n        stateManager.initialize();\n        stateManager.register(\n            new WrappedStateStore<NoOpReadOnlyStore<Object, Object>, Object, Object>(store2) {\n            },\n            stateRestoreCallback\n        );\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(13, restoredRecord.value.length);\n    }\n","date":"2019-03-01 01:33:53","endLine":278,"groupId":"1386","id":6,"instanceNumber":2,"isCurCommit":0,"methodName":"shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/c7/4ad1bb77cbfaaefef1d5e57a21c246373921f6.src","preCode":"    public void shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore() {\n        initializeConsumer(1, 0, t2);\n\n        stateManager.initialize();\n        stateManager.register(\n            new WrappedStateStore<NoOpReadOnlyStore<Object, Object>>(store2) {\n            },\n            stateRestoreCallback\n        );\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(13, restoredRecord.value.length);\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/GlobalStateManagerImplTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":265,"status":"M"}],"commitId":"3c46b5669de856f4510b8d291a8af7dbd809c07b","commitMessage":"@@@MINOR: Remove types from caching stores (#6331)\n\n* MINOR: remove types from caching stores\n\n* Github comments and rebased\n","date":"2019-03-01 01:33:53","modifiedFileCount":"32","status":"M","submitter":"Matthias J. Sax"},{"authorTime":"2020-02-05 13:06:39","codes":[{"authorDate":"2020-02-05 13:06:39","commitOrder":4,"curCode":"    public void shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore() {\n        initializeConsumer(1, 0, t1);\n\n        stateManager.initialize();\n        stateManager.registerStore(\n            new WrappedStateStore<NoOpReadOnlyStore<Object, Object>, Object, Object>(store1) {\n            },\n            stateRestoreCallback\n        );\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(5, restoredRecord.value.length);\n    }\n","date":"2020-02-05 13:06:39","endLine":286,"groupId":"102106","id":7,"instanceNumber":1,"isCurCommit":0,"methodName":"shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/40/8714128a053bfa0169cfd073fc6a455525bece.src","preCode":"    public void shouldNotConvertValuesIfInnerStoreDoesNotImplementTimestampedBytesStore() {\n        initializeConsumer(1, 0, t1);\n\n        stateManager.initialize();\n        stateManager.register(\n            new WrappedStateStore<NoOpReadOnlyStore<Object, Object>, Object, Object>(store1) {\n            },\n            stateRestoreCallback\n        );\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(5, restoredRecord.value.length);\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/GlobalStateManagerImplTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":273,"status":"M"},{"authorDate":"2020-02-05 13:06:39","commitOrder":4,"curCode":"    public void shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore() {\n        initializeConsumer(1, 0, t2);\n\n        stateManager.initialize();\n        stateManager.registerStore(\n            new WrappedStateStore<NoOpReadOnlyStore<Object, Object>, Object, Object>(store2) {\n            },\n            stateRestoreCallback\n        );\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(13, restoredRecord.value.length);\n    }\n","date":"2020-02-05 13:06:39","endLine":314,"groupId":"102106","id":8,"instanceNumber":2,"isCurCommit":0,"methodName":"shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore","params":"()","path":"/mnt/clonedata/CloneManagementServer/ManagementServer/consistResult/result-kafka-10-0.7/blobInfo/CC_OUT/blobs/40/8714128a053bfa0169cfd073fc6a455525bece.src","preCode":"    public void shouldConvertValuesIfInnerStoreImplementsTimestampedBytesStore() {\n        initializeConsumer(1, 0, t2);\n\n        stateManager.initialize();\n        stateManager.register(\n            new WrappedStateStore<NoOpReadOnlyStore<Object, Object>, Object, Object>(store2) {\n            },\n            stateRestoreCallback\n        );\n\n        final KeyValue<byte[], byte[]> restoredRecord = stateRestoreCallback.restored.get(0);\n        assertEquals(3, restoredRecord.key.length);\n        assertEquals(13, restoredRecord.value.length);\n    }\n","realPath":"streams/src/test/java/org/apache/kafka/streams/processor/internals/GlobalStateManagerImplTest.java","repoName":"kafka","snippetEndLine":0,"snippetStartLine":0,"startLine":301,"status":"M"}],"commitId":"4090f9a2b0a95e4da127e4786007542276d97520","commitMessage":"@@@KAFKA-9113: Clean up task management and state management (#7997)\n\nThis PR is collaborated by Guozhang Wang and John Roesler. It is a significant tech debt cleanup on task management and state management.  and is broken down by several sub-tasks listed below:\n\nExtract embedded clients (producer and consumer) into RecordCollector from StreamTask.\nguozhangwang#2\nguozhangwang#5\n\nConsolidate the standby updating and active restoring logic into ChangelogReader and extract out of StreamThread.\nguozhangwang#3\nguozhangwang#4\n\nIntroduce Task state life cycle (created.  restoring.  running.  suspended.  closing).  and refactor the task operations based on the current state.\nguozhangwang#6\nguozhangwang#7\n\nConsolidate AssignedTasks into TaskManager and simplify the logic of changelog management and task management (since they are already moved in step 2) and 3)).\nguozhangwang#8\nguozhangwang#9\n\nAlso simplified the StreamThread logic a bit as the embedded clients / changelog restoration logic has been moved into step 1) and 2).\nguozhangwang#10\n\nReviewers: A. Sophie Blee-Goldman <sophie@confluent.io>.  Bruno Cadonna <bruno@confluent.io>.  Boyang Chen <boyang@confluent.io>","date":"2020-02-05 13:06:39","modifiedFileCount":"76","status":"M","submitter":"Guozhang Wang"}]
